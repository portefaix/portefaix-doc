<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Portefaix – Deployment</title><link>/docs/aws/deploy/</link><description>Recent content in Deployment on Portefaix</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><atom:link href="/docs/aws/deploy/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: Install Portefaix</title><link>/docs/aws/deploy/install-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/aws/deploy/install-portefaix/</guid><description>
&lt;p>&lt;a id="aws">&lt;/a>&lt;/p>
&lt;h2 id="setup">Setup&lt;/h2>
&lt;p>Creates an &lt;a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_accounts_create.html">AWS Organization&lt;/a>, and enable Service Control Policies in AWS organizations.&lt;/p>
&lt;p>Now that we’ve created an organization, you’ll notice that all the policies are disabled by default.&lt;/p>
&lt;p>There you need to enable AWS Service Control Policies in the AWS console by clicking on the button Enable service control policies. Do the same action for the AWS Tag Policies.&lt;/p>
&lt;p>Navigate to Personal Health Dashboard service in the console. On the left side panel, expand Organizational view and choose configurations. Then, enable organizational view for AWS Health&lt;/p>
&lt;p>Create an &lt;a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/getting-started_create-admin-group.html">admin user&lt;/a>, and configure &lt;a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/getting-started_how-users-sign-in.html">account alias for IAM Users access&lt;/a>&lt;/p>
&lt;p>Then &lt;a href="https://console.aws.amazon.com/iam/home?#/security_credentials">API Keys&lt;/a>.&lt;/p>
&lt;p>Configure Portefaix environment file &lt;code>${HOME}/.config/portefaix/portefaix.sh&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">&lt;span style="color:#000">HOME_IP&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>curl -s http://ifconfig.me&lt;span style="color:#204a87;font-weight:bold">)&lt;/span>
&lt;span style="color:#000">SLACK_WEBHOOK_NOTIFS&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;https://hooks.slack.com/services/xxx/xxx&amp;#34;&lt;/span>
&lt;span style="color:#8f5902;font-style:italic"># AWS&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">function&lt;/span> setup_aws&lt;span style="color:#ce5c00;font-weight:bold">()&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">AWS_ACCESS_KEY_ID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;.....&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">AWS_SECRET_ACCESS_KEY&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;.....&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">AWS_DEFAULT_REGION&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;...&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">AWS_REGION&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;....&amp;#34;&lt;/span>
&lt;span style="color:#8f5902;font-style:italic"># For Terraform Cloud&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">TF_VAR_access_key&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">AWS_ACCESS_KEY_ID&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">TF_VAR_secret_key&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">AWS_SECRET_ACCESS_KEY&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">TF_VAR_slack_webhook_url&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">SLACK_WEBHOOK_NOTIFS&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">TF_VAR_org_email&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;xxxxxx&amp;#34;&lt;/span> &lt;span style="color:#8f5902;font-style:italic"># for Root Account&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">TF_VAR_org_email_domain&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;gmail.com&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">TF_VAR_org_admin_username&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;xxxxxx&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">TF_VAR_admin_ipv4&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;[\&amp;#34;&lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">HOME_IP&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">/32\&amp;#34;]&amp;#34;&lt;/span> &lt;span style="color:#8f5902;font-style:italic"># for WAF&lt;/span>
&lt;span style="color:#ce5c00;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Load environment :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ . ./portefaix.sh aws
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="storage-for-terraform">Storage for Terraform&lt;/h2>
&lt;p>Create a S3 bucket for Terraform states:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/aws.mk aws-s3-bucket &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create a DynamoDB table :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/aws.mk aws-dynamodb-create-table &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="aws-organization-units-and-accounts">AWS Organization Units and Accounts&lt;/h2>
&lt;p>Configure the AWS Organization:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>terraform/aws/root &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>main
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/aws_organization.png" alt="
Portefaix AWS organization" class="mt-3 mb-3 rounded">&lt;/p>
&lt;p>&lt;a id="aws-terraform-cloud">&lt;/a>&lt;/p>
&lt;h2 id="terraform-cloud--github-actions">Terraform Cloud / Github Actions&lt;/h2>
&lt;p>&lt;a href="https://terraform.cloud">Terraform Cloud&lt;/a> is used as the remote backend. &lt;a href="https://github.com/features/actions">Github Actions&lt;/a> perform tasks to deploy the AWS infrastructure.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>terraform/aws/terraform-cloud &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>main
&lt;/code>&lt;/pre>&lt;/div>&lt;img src="/docs/images/portefaix-aws-deploy.png" alt="Portefaix AWS deployment" class="mt-3 mb-3 rounded">
&lt;p>&lt;a id="aws-gitops">&lt;/a>&lt;/p>
&lt;h2 id="gitops-for-kubernetes">Gitops for Kubernetes&lt;/h2>
&lt;p>See : &lt;a href="/docs/development/gitops-fluxcd">Gitops with FluxCD&lt;/a> or &lt;a href="/docs/development/gitops-argocd/">Gitops with ArgoCD&lt;/a>&lt;/p></description></item><item><title>Docs: Inspec Portefaix</title><link>/docs/aws/deploy/inspec-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/aws/deploy/inspec-portefaix/</guid><description>
&lt;p>&lt;a href="http://inspec.io/">Inspec&lt;/a> is used to check infrastructure.&lt;/p>
&lt;p>Check:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/aws.mk inspec-debug
Test infrastructure
────────────────────────────── Platform Details ──────────────────────────────
Name: aws
Families: cloud, api
Release: train-aws: v0.1.15, aws-sdk-core: v3.94.0
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Execute tests:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/aws.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/&amp;lt;SERVICE&amp;gt; &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You could upload JSON results file to &lt;a href="https://heimdall-lite.mitre.org/">Heimdall Lite&lt;/a> to display ressults&lt;/p>
&lt;h2 id="cis-aws-foundations-benchmark">CIS AWS Foundations Benchmark&lt;/h2>
&lt;p>You could perform tests according to the &lt;a href="https://docs.aws.amazon.com/securityhub/latest/userguide/securityhub-standards-cis.html">CIS AWS Foundations Benchmark&lt;/a>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/aws.mk inspec-aws-cis &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="cis-kubernetes-benchmark">CIS Kubernetes Benchmark&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/aws.mk inspec-aws-kubernetes &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="vpc">VPC&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/aws.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/vpc &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-aws-vpc.png"
alt="VPC"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>vpc-1&lt;/code>&lt;/td>
&lt;td>Ensure that VPC exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>vpc-2&lt;/code>&lt;/td>
&lt;td>Ensure that VPC have an Internet Gateway&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>vpc-3&lt;/code>&lt;/td>
&lt;td>Check AWS Security Groups does not have undesirable rules&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>vpc-4&lt;/code>&lt;/td>
&lt;td>Ensure that VPC Subnets exists&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="eks">EKS&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/aws.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/eks &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-aws-eks.png"
alt="EKS"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>eks-1&lt;/code>&lt;/td>
&lt;td>Ensure the AWS EKS Cluster is running a minimal version&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>eks-2&lt;/code>&lt;/td>
&lt;td>Ensure the AWS EKS Cluster control plane has audit logs enabled&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>eks-3&lt;/code>&lt;/td>
&lt;td>Ensure the AWS EKS Cluster is not public&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>eks-4&lt;/code>&lt;/td>
&lt;td>Ensure the AWS EKS Cluster has application secrets encryption enabled&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>eks-5&lt;/code>&lt;/td>
&lt;td>Ensure AWS EKS Cluster Subnets are specific&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>eks-6&lt;/code>&lt;/td>
&lt;td>Ensure AWS EKS Cluster Nodegroups do not allow remote access from all IPs&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="sops">Sops&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/aws.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/sops &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-aws-sops.png"
alt="Sops"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>sops-1&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>sops-2&lt;/code>&lt;/td>
&lt;td>Ensure IAM roles and policies exists&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="observability">Observability&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/aws.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/observability &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-aws-observability.png"
alt="Observability"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>grafana-1&lt;/code>&lt;/td>
&lt;td>Ensure IAM roles and policies exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>prometheus-1&lt;/code>&lt;/td>
&lt;td>Ensure IAM roles and policies exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>thanos-1&lt;/code>&lt;/td>
&lt;td>Ensure that S3 bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>thanos-2&lt;/code>&lt;/td>
&lt;td>Ensure that S3 log bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>thanos-3&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>thanos-4&lt;/code>&lt;/td>
&lt;td>Ensure IAM roles and policies exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>loki-1&lt;/code>&lt;/td>
&lt;td>Ensure that S3 bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>loki-2&lt;/code>&lt;/td>
&lt;td>Ensure that S3 log bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>loki-3&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>loki-4&lt;/code>&lt;/td>
&lt;td>Ensure IAM roles and policies exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>tempo-1&lt;/code>&lt;/td>
&lt;td>Ensure that S3 bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>tempo-2&lt;/code>&lt;/td>
&lt;td>Ensure that S3 log bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>tempo-3&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>tempo-4&lt;/code>&lt;/td>
&lt;td>Ensure IAM roles and policies exists&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="velero">Velero&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/aws.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/velero &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-aws-velero.png"
alt="Velero"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>velero-1&lt;/code>&lt;/td>
&lt;td>Ensure that S3 bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>velero-2&lt;/code>&lt;/td>
&lt;td>Ensure that S3 log bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>velero-3&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>velero-4&lt;/code>&lt;/td>
&lt;td>Ensure IAM roles and policies exists&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="vector">Vector&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/aws.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/vector &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-aws-vector.png"
alt="Vector"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>vector-1&lt;/code>&lt;/td>
&lt;td>Ensure that S3 bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>vector-2&lt;/code>&lt;/td>
&lt;td>Ensure that S3 log bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>vector-3&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>vector-4&lt;/code>&lt;/td>
&lt;td>Ensure IAM roles and policies exists&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Docs: Uninstall Portefaix</title><link>/docs/aws/deploy/uninstall-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/aws/deploy/uninstall-portefaix/</guid><description>
&lt;h2 id="terraform">Terraform&lt;/h2>
&lt;p>&lt;a href="https://github.com/features/actions">Github Actions&lt;/a> with &lt;a href="https://www.terraform.io/cloud">Terraform Cloud&lt;/a> could be used to delete the infrastructure:&lt;/p>
&lt;img src="/docs/images/portefaix-aws-undeploy.png" alt="Portefaix Azure deletion" class="mt-3 mb-3 rounded"></description></item></channel></rss>