<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Portefaix – Documentation</title><link>/docs/</link><description>Recent content in Documentation on Portefaix</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><atom:link href="/docs/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: Portefaix</title><link>/docs/about/portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/about/portefaix/</guid><description>
&lt;p>The Portefaix project is dedicated to create an infrastructure on Cloud Providers
and deploy Cloud Native applications into a Kubernetes cluster.&lt;/p>
&lt;h2 id="getting-started-with-portefaix">Getting started with Portefaix&lt;/h2>
&lt;p>Read the &lt;a href="/docs/started/overview/">Portefaix overview&lt;/a> for an
introduction to the Portefaix architecture.&lt;/p>
&lt;p>Follow the &lt;a href="/docs/started/getting-started/">getting-started guide&lt;/a> to set up
your environment and install Portefaix.&lt;/p>
&lt;h2 id="roadmaps">Roadmaps&lt;/h2>
&lt;p>To see what&amp;rsquo;s coming up in future versions of Portefaix, refer to the &lt;a href="/docs/other-guides/roadmap/">Portefaix roadmap&lt;/a>.&lt;/p>
&lt;h2 id="getting-involved">Getting involved&lt;/h2>
&lt;p>There are many ways to contribute to Portefaix, and we welcome contributions!
Read the &lt;a href="/docs/about/contributing">contributor&amp;rsquo;s guide&lt;/a> to get started on the
code, and get to know the community in the
&lt;a href="/docs/about/community">community guide&lt;/a>.&lt;/p></description></item><item><title>Docs: Contributing to Portefaix</title><link>/docs/about/contributing/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/about/contributing/</guid><description>
&lt;div class="alert alert-warning" role="alert">
&lt;h4 class="alert-heading">Work In Progress&lt;/h4>
&lt;/div>
&lt;h2 id="getting-started-as-a-portefaix-contributor">Getting started as a Portefaix contributor&lt;/h2>
&lt;p>This document is the single source of truth for how to contribute to the code base.
Patches and contributions to this project are welcome. There are
just a few small guidelines you need to fo&lt;/p></description></item><item><title>Docs: Community</title><link>/docs/about/community/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/about/community/</guid><description>
&lt;div class="alert alert-warning" role="alert">
&lt;h4 class="alert-heading">Work In Progress&lt;/h4>
&lt;/div></description></item><item><title>Docs: Docs</title><link>/docs/about/docs/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/about/docs/</guid><description>
&lt;p>Welcome to the Portefaix documentation!&lt;/p>
&lt;h2 id="introduction">Introduction&lt;/h2>
&lt;p>The Portefaix docs are published at &lt;a href="https://portefaix.xyz/docs">portefaix.xyz/docs&lt;/a>.&lt;/p>
&lt;p>The source for the docs is in the
&lt;a href="https://github.com/portefaix/portefaix-doc">portefaix/portefaix-doc repo&lt;/a> on GitHub.
We use &lt;a href="https://gohugo.io/">Hugo&lt;/a> to format and generate our website.&lt;/p>
&lt;h2 id="versioning">Versioning&lt;/h2>
&lt;p>&lt;a href="https://portefaix.xyz/docs">portefaix.xyz/docs&lt;/a> points to the &lt;strong>master&lt;/strong> branch of the docs. You can access
other versions by clicking the version dropdown at top right of the website
menu bar.&lt;/p></description></item><item><title>Docs: Authentication and Authorization</title><link>/docs/alicloud/authentication/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/alicloud/authentication/</guid><description>
&lt;p>This section shows the how to setup Portefaix with authentication and authorization support in Alibaba Cloud&lt;/p>
&lt;h2 id="configure-alibaba-cloud">Configure Alibaba Cloud&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ . ./portefaix.sh alicloud
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span> Portefaix &lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
Setup credentials
Done
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="bastion">Bastion&lt;/h2>
&lt;div class="alert alert-warning" role="alert">
&lt;h4 class="alert-heading">Work In Progress&lt;/h4>
&lt;/div>
&lt;h2 id="configure-kubectl">Configure kubectl&lt;/h2>
&lt;div class="alert alert-warning" role="alert">
&lt;h4 class="alert-heading">Work In Progress&lt;/h4>
&lt;/div>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make kubernetes-credentials &lt;span style="color:#000">CLOUD&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>alicloud &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ kubectl get nodes
NAME STATUS ROLES AGE VERSION
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: Authentication and Authorization</title><link>/docs/aws/authentication/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/aws/authentication/</guid><description>
&lt;p>This section shows the how to setup Portefaix with authentication and authorization support in Amazon Webservices (AWS)&lt;/p>
&lt;h2 id="configure-aws">Configure AWS&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ . ./portefaix.sh aws
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span> Portefaix &lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
Setup credentials
Done
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="bastion">Bastion&lt;/h2>
&lt;p>You would use the &lt;a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/session-manager-working-with-install-plugin.html">AWS System Manager plugin&lt;/a> to connect to EC2 and EKS instances:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ aws ec2 describe-instances --output table
-------------------
&lt;span style="color:#000;font-weight:bold">|&lt;/span>DescribeInstances&lt;span style="color:#000;font-weight:bold">|&lt;/span>
+-----------------+
❯ aws ssm start-session --target i-019042b3847f5c81f
Starting session with SessionId: portefaix-admin-031b2ba6d981142b0
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="configure-kubectl">Configure kubectl&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make kubernetes-credentials &lt;span style="color:#000">CLOUD&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>aws &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ kubectl get nodes
NAME STATUS ROLES AGE VERSION
ip-10-0-31-216.eu-west-3.compute.internal Ready &amp;lt;none&amp;gt; 101m v1.18.9-eks-d1db3c
ip-10-0-40-203.eu-west-3.compute.internal Ready &amp;lt;none&amp;gt; 101m v1.18.9-eks-d1db3c
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: Authentication and Authorization</title><link>/docs/civo/authentication/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/civo/authentication/</guid><description>
&lt;p>This section shows the how to setup Portefaix with authentication and authorization support in Civo&lt;/p>
&lt;h2 id="configure-civo">Configure Civo&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ . ./portefaix.sh civo
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span> Portefaix &lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
 Flux
 Pagerduty
 TerraformCloud
 Civo
✔ Done
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="configure-kubectl">Configure kubectl&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/civo.mk civo-kube-credentials &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ kubectl get nodes
NAME STATUS ROLES AGE VERSION
k3s-portefaix-dev-civo-691a-de1391-node-pool-8c2e-859cq Ready &amp;lt;none&amp;gt; 6m29s v1.22.2+k3s1
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: Authentication and Authorization</title><link>/docs/digitalocean/authentication/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/digitalocean/authentication/</guid><description>
&lt;p>This section shows the how to setup Portefaix with authentication and authorization support in Digital Ocean&lt;/p>
&lt;h2 id="configure-digital-ocean">Configure Digital Ocean&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ . ./portefaix.sh digitalocean
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span> Portefaix &lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
Setup credentials
Done
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="configure-kubectl">Configure kubectl&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make kubernetes-credentials &lt;span style="color:#000">CLOUD&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>digitalocean &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ kubectl get nodes
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: Authentication and Authorization</title><link>/docs/exoscale/authentication/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/exoscale/authentication/</guid><description>
&lt;p>This section shows the how to setup Portefaix with authentication and authorization support in Exoscale&lt;/p>
&lt;h2 id="configure-exoscale">Configure Exoscale&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ . ./portefaix.sh exoscale
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span> Portefaix &lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
Setup credentials
Done
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="configure-kubectl">Configure kubectl&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make kubernetes-credentials &lt;span style="color:#000">CLOUD&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>exoscale &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ kubectl get nodes
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: Authentication and Authorization</title><link>/docs/ibmcloud/authentication/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/ibmcloud/authentication/</guid><description>
&lt;p>This section shows the how to setup Portefaix with authentication and authorization support in IBMCloud&lt;/p>
&lt;h2 id="configure-ibmcloud">Configure IBMCloud&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ . ./portefaix.sh ibmcloud
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span> Portefaix &lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
✔ Configuration file
✔ Flux
✔ PagerDuty
✔ Terraform Cloud
✔ IBMCloud
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="configure-kubectl">Configure kubectl&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/ibmcloud.mk ibmcloud-kube-credentials &lt;span style="color:#000">CLOUD&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>ibmcloud &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ kubectl get nodes
NAME STATUS ROLES AGE VERSION
10.242.0.10 Ready &amp;lt;none&amp;gt; 13m v1.22.7+IKS
10.242.0.7 Ready &amp;lt;none&amp;gt; 29m v1.22.7+IKS
10.242.128.10 Ready &amp;lt;none&amp;gt; 12m v1.22.7+IKS
10.242.128.7 Ready &amp;lt;none&amp;gt; 29m v1.22.7+IKS
10.242.64.6 Ready &amp;lt;none&amp;gt; 29m v1.22.7+IKS
10.242.64.8 Ready &amp;lt;none&amp;gt; 13m v1.22.7+IKS
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: Authentication and Authorization</title><link>/docs/oci/authentication/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/oci/authentication/</guid><description>
&lt;p>This section shows the how to setup Portefaix with authentication and authorization support in Exoscale&lt;/p>
&lt;h2 id="configure-exoscale">Configure Exoscale&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ . ./portefaix.sh exoscale
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span> Portefaix &lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
Setup credentials
Done
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="configure-kubectl">Configure kubectl&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make kubernetes-credentials &lt;span style="color:#000">CLOUD&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>exoscale &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ kubectl get nodes
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: Authentication and Authorization</title><link>/docs/scaleway/authentication/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/scaleway/authentication/</guid><description>
&lt;p>This section shows the how to setup Portefaix with authentication and authorization support in Scaleway&lt;/p>
&lt;h2 id="configure-scaleway">Configure Scaleway&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ . ./portefaix.sh scaleway
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span> Portefaix &lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
Setup credentials
Done
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="configure-kubectl">Configure kubectl&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make kubernetes-credentials &lt;span style="color:#000">CLOUD&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>scaleway &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>sandbox
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ kubectl get nodes
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: FluxCD</title><link>/docs/gitops/gitops-fluxcd/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/gitops/gitops-fluxcd/</guid><description>
&lt;p>&lt;a href="https://www.weave.works/technologies/gitops/">Gitops&lt;/a> model used is &lt;a href="https://toolkit.fluxcd.io/">Flux v2&lt;/a>&lt;/p>
&lt;p>&lt;img src="/docs/images/gitops-toolkit.png"
alt="Flux v2"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;h2 id="organization">Organization&lt;/h2>
&lt;p>Manifests files :&lt;/p>
&lt;ul>
&lt;li>&lt;code>kubernetes/base&lt;/code> directory contains manifests for all components&lt;/li>
&lt;li>&lt;code>kubernetes/overlays/**&lt;/code> directory contains &lt;a href="https://kustomize.io/">Kustomize&lt;/a> overlays&lt;/li>
&lt;/ul>
&lt;p>Flux components are deployed for each cluster on &lt;code>clusters/&amp;lt;CLOUD&amp;gt;/&amp;lt;ENV&amp;gt;/&lt;/code> :&lt;/p>
&lt;ul>
&lt;li>&lt;code>clusters/&amp;lt;CLOUD&amp;gt;/&amp;lt;ENV&amp;gt;/flux-system&lt;/code> : Flux core components&lt;/li>
&lt;li>&lt;code>clusters/&amp;lt;CLOUD&amp;gt;/&amp;lt;ENV&amp;gt;/*.yaml&lt;/code> : &lt;a href="https://toolkit.fluxcd.io/components/kustomize/kustomization/">Flux Kustomization&lt;/a> files for components&lt;/li>
&lt;/ul>
&lt;h2 id="bootstrap">Bootstrap&lt;/h2>
&lt;h3 id="fluxcd">FluxCD&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make fluxcd-bootstrap &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;environment&amp;gt; &lt;span style="color:#000">CLOUD&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;cloud provider&amp;gt; &lt;span style="color:#000">BRANCH&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;git branch to use&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="secrets">Secrets&lt;/h3>
&lt;p>&lt;a href="https://github.com/mozilla/sops">Sops&lt;/a> is used to manage secrets.&lt;/p>
&lt;p>Create for each cloud provider and environment an &lt;a href="https://age-encryption.org/">Age&lt;/a> key. Store it into:&lt;/p>
&lt;p>&lt;code>.secrets/&amp;lt;CLOUD_PROVIDER&amp;gt;/&amp;lt;ENV&amp;gt;/age/age.agekey&lt;/code>&lt;/p>
&lt;p>Put your sensitive data into the directory &lt;code>.secrets&lt;/code> or &lt;code>.secrets/&amp;lt;CLOUD_PROVIDER&amp;gt;/&amp;lt;ENV&amp;gt;/&amp;lt;APPLICATION&amp;gt;&lt;/code>&lt;/p>
&lt;p>Then deploy the Age key into a Kubernetes secret:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make sops-age-secret &lt;span style="color:#000">CLOUD&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;CLOUD_PROVIDER&amp;gt; &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;ENV&amp;gt; &lt;span style="color:#000">NAMESPACE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>flux-system
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="stacks">Stacks&lt;/h3>
&lt;p>You can list stack installed:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ kubectl -n flux-system get kustomization -l &lt;span style="color:#4e9a06">&amp;#34;app.kubernetes.io/component=portefaix-stack&amp;#34;&lt;/span>
NAME AGE READY STATUS
core 107m True Applied revision: feat/weave-gitops/2ea4d23f1ae31bfb6afbe57a4662b5990dcf3307
observability 109m True Applied revision: feat/weave-gitops/2ea4d23f1ae31bfb6afbe57a4662b5990dcf3307
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And Helm releases:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ helm list -A
NAME NAMESPACE REVISION UPDATED STATUS CHART APP VERSION
alertmanager-mixin monitoring &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> 2022-08-08 10:57:51.540267795 +0000 UTC deployed alertmanager-mixin-0.6.0 0.23.0
kube-prometheus-stack monitoring &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> 2022-08-08 10:57:52.701498295 +0000 UTC deployed kube-prometheus-stack-35.0.3 0.56.0
kube-state-metrics-mixin monitoring &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> 2022-08-08 10:57:52.285323133 +0000 UTC deployed kube-state-metrics-mixin-0.10.0 2.2.4
kubernetes-mixin monitoring &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> 2022-08-08 10:57:52.528376605 +0000 UTC deployed kubernetes-mixin-0.8.0 0.8.0
kyverno flux-system &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> 2022-08-08 09:00:31.649605165 +0000 UTC deployed kyverno-crds-v2.0.3 v1.4.3
metrics-server kube-system &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> 2022-08-08 10:57:41.851963826 +0000 UTC failed metrics-server-3.8.2 0.6.1
prometheus-mixin monitoring &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> 2022-08-08 10:57:53.019370201 +0000 UTC deployed prometheus-mixin-0.10.0 2.31.1
prometheus-operator-mixin monitoring &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> 2022-08-08 10:57:53.815678548 +0000 UTC deployed prometheus-operator-mixin-0.8.0 0.52.1
weawe-gitops flux-system &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> 2022-08-08 07:49:32.97390968 +0000 UTC deployed weave-gitops-2.2.5 v0.9.1
&lt;/code>&lt;/pre>&lt;/div>&lt;img src="/docs/images/fluxcd-applications.png" alt="Flux-CD Applications" class="mt-3 mb-3 border border-info rounded">
&lt;img src="/docs/images/fluxcd-kustomization-details.png" alt="Details" class="mt-3 mb-3 border border-info rounded">
&lt;img src="/docs/images/fluxcd-kustomization-graph.png" alt="Graph" class="mt-3 mb-3 border border-info rounded">
&lt;h2 id="secrets-1">Secrets&lt;/h2>
&lt;h3 id="file">File&lt;/h3>
&lt;p>Create a Kubernetes secret file from sensitive file.&lt;/p>
&lt;p>Ex: for Thanos configuration :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="color:#000">❯ cat .secrets/aws/object-store.yaml&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">S3&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">config&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">bucket&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">xxxxxxxxxxx&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">endpoint&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">s3.eu-west-3.amazonaws.com&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">region&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">eu-west-3&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make kubernetes-secret &lt;span style="color:#000">NAME&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>thanos-object-storage &lt;span style="color:#000">NAMESPACE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>monitoring &lt;span style="color:#000">FILE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>.secrets/aws/object-store.yaml &amp;gt; thanos-object-storage.yaml
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="encrypt">Encrypt&lt;/h3>
&lt;p>Encrypt the file using Sops:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make sops-encrypt &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging &lt;span style="color:#000">CLOUD&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>aws &lt;span style="color:#000">FILE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>thanos-object-storage.yaml
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You can now safely store this file into Git.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ mv thanos-object-storage.yaml kubernetes/overlays/staging/monitoring/thanos/
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="decrypt">Decrypt&lt;/h3>
&lt;p>Check you can decrypt the file:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make sops-decrypt &lt;span style="color:#000">FILE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>kubernetes/overlays/staging/monitoring/thanos/thanos-object-storage.yaml
apiVersion: v1
data:
object-store.yaml: xxxxxxxxxxx
kind: Secret
metadata:
creationTimestamp: null
name: thanos-object-storage
namespace: monitoring
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="cicd">CI/CD&lt;/h2>
&lt;h3 id="age">AGE&lt;/h3>
&lt;div class="alert alert-warning" role="alert">
&lt;h4 class="alert-heading">Work In Progress&lt;/h4>
&lt;/div>
&lt;h3 id="pgp">PGP&lt;/h3>
&lt;p>Generate a GPG key with OpenPGP without specifying a passphrase:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ gpg --full-generate-key
Real name: nlamirault
Email address: nlamirault@users.noreply.github.com
Comment:
You selected this USER-ID:
&lt;span style="color:#4e9a06">&amp;#34;nlamirault &amp;lt;nlamirault@users.noreply.github.com&amp;gt;&amp;#34;&lt;/span>
Change &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>N&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>ame, &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>C&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>omment, &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>E&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>mail or &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>O&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>kay/&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>Q&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>uit? O
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Retrieve the GPG key ID:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ gpg --export-secret-keys &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span>--armor FC5BB3323309486AC8DA477CEC6421C7C33D2301
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Add this output into a Github Secret &lt;code>SOPS_GPG_KEY&lt;/code>.&lt;/p>
&lt;p>On the &lt;code>e2e&lt;/code> Github Action workflow, we create a Kubernetes secret &lt;code>sops-gpg&lt;/code>
which will be used by Flux.&lt;/p></description></item><item><title>Docs: Helm and Kustomize</title><link>/docs/other-guides/helm_kustomize/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/other-guides/helm_kustomize/</guid><description>
&lt;h2 id="helmrelease">HelmRelease&lt;/h2>
&lt;p>&lt;em>HelmRelease&lt;/em> control the Helm chart into Flux.&lt;/p>
&lt;p>Display informations about the Helm chart from a HelmRelease:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make helm-flux-chart &lt;span style="color:#000">CHART&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>kubernetes/base/monitoring/kube-prometheus-stack/kube-prometheus-stack.yaml
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>portefaix&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> Helm repository and chart kubernetes/base/monitoring/kube-prometheus-stack/kube-prometheus-stack.yaml
https://prometheus-community.github.io/helm-charts
prometheus-community-charts
kube-prometheus-stack
16.13.0
monitoring
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You can extract from a HelmRelease file the Helm repository and add it:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ &lt;span style="color:#000">DEBUG&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#204a87">true&lt;/span> make helm-flux-repo &lt;span style="color:#000">CHART&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>kubernetes/base/logging/vector/vector.yaml
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Then display available values from the Helm chart:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ &lt;span style="color:#000">DEBUG&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#204a87">true&lt;/span> make helm-flux-values &lt;span style="color:#000">CHART&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>kubernetes/base/logging/vector/vector.yaml
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="environments">Environments&lt;/h2>
&lt;p>You could rendering Kubernetes manifests files like Flux:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ &lt;span style="color:#000">DEBUG&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#204a87">true&lt;/span> make helm-flux-template &lt;span style="color:#000">CHART&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>kubernetes/base/logging/vector/vector.yaml &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Or install the chart for an environment&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ &lt;span style="color:#000">DEBUG&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#204a87">true&lt;/span> make helm-flux-install &lt;span style="color:#000">CHART&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>kubernetes/base/logging/vector/vector.yaml &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: Install Portefaix</title><link>/docs/alicloud/deploy/install-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/alicloud/deploy/install-portefaix/</guid><description>
&lt;p>&lt;a id="alicloud">&lt;/a>&lt;/p>
&lt;h2 id="setup">Setup&lt;/h2>
&lt;p>Create an admin user, then API Keys.
And configure Portefaix environment file &lt;code>${HOME}/.config/portefaix/portefaix.sh&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">&lt;span style="color:#8f5902;font-style:italic"># Alicloud&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">function&lt;/span> setup_alicloud&lt;span style="color:#ce5c00;font-weight:bold">()&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">{&lt;/span>
&lt;span style="color:#8f5902;font-style:italic"># Alicloud User: Portefaix Admin&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">ALICLOUD_ACCESS_KEY&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;xxxxxxxxxx&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">ALICLOUD_SECRET_KEY&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;xxxxxxxxxxxxxxxx&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">ALICLOUD_REGION&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;eu-central-1&amp;#34;&lt;/span>
&lt;span style="color:#8f5902;font-style:italic"># For Terraform Cloud&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">TF_VAR_access_key&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">ALICLOUD_ACCESS_KEY&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">TF_VAR_secret_key&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">ALICLOUD_SECRET_KEY&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">TF_VAR_region&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">ALICLOUD_REGION&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>
&lt;span style="color:#ce5c00;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And load environment :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ . ./portefaix.sh alicloud
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="storage-for-terraform">Storage for Terraform&lt;/h2>
&lt;p>Create an OSS bucket for Terraform states:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/alicloud.mk aliyun-bucket-create &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create a TableStore instance:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/alicloud.mk aliyun-tablestore-create &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;a id="alicloud-terraform-cloud">&lt;/a>&lt;/p>
&lt;h2 id="terraform-cloud--github-actions">Terraform Cloud / Github Actions&lt;/h2>
&lt;p>&lt;a href="https://terraform.cloud">Terraform Cloud&lt;/a> is used as the remote backend. &lt;a href="https://github.com/features/actions">Github Actions&lt;/a> perform tasks to deploy the Alibaba Cloud infrastructure.&lt;/p>
&lt;img src="/docs/images/portefaix-alicloud-deploy.png" alt="Portefaix Alibaba Cloud deployment" class="mt-3 mb-3 rounded">
&lt;p>&lt;a id="alicloud-gitops">&lt;/a>&lt;/p>
&lt;h2 id="gitops-for-kubernetes">Gitops for Kubernetes&lt;/h2>
&lt;p>Next: &lt;a href="/docs/gitops">Gitops&lt;/a>&lt;/p></description></item><item><title>Docs: Install Portefaix</title><link>/docs/aws/deploy/install-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/aws/deploy/install-portefaix/</guid><description>
&lt;p>&lt;a id="aws">&lt;/a>&lt;/p>
&lt;h2 id="setup">Setup&lt;/h2>
&lt;p>Creates an &lt;a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_accounts_create.html">AWS Organization&lt;/a>, and enable Service Control Policies in AWS organizations.&lt;/p>
&lt;p>Now that we’ve created an organization, you’ll notice that all the policies are disabled by default.&lt;/p>
&lt;p>There you need to enable AWS Service Control Policies in the AWS console by clicking on the button Enable service control policies. Do the same action for the AWS Tag Policies.&lt;/p>
&lt;p>Navigate to Personal Health Dashboard service in the console. On the left side panel, expand Organizational view and choose configurations. Then, enable organizational view for AWS Health&lt;/p>
&lt;p>Create an &lt;a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/getting-started_create-admin-group.html">admin user&lt;/a>, and configure &lt;a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/getting-started_how-users-sign-in.html">account alias for IAM Users access&lt;/a>&lt;/p>
&lt;p>Then &lt;a href="https://console.aws.amazon.com/iam/home?#/security_credentials">API Keys&lt;/a>.&lt;/p>
&lt;p>Configure Portefaix environment file &lt;code>${HOME}/.config/portefaix/portefaix.sh&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">&lt;span style="color:#000">HOME_IP&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>curl -s http://ifconfig.me&lt;span style="color:#204a87;font-weight:bold">)&lt;/span>
&lt;span style="color:#000">SLACK_WEBHOOK_NOTIFS&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;https://hooks.slack.com/services/xxx/xxx&amp;#34;&lt;/span>
&lt;span style="color:#8f5902;font-style:italic"># AWS&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">function&lt;/span> setup_aws&lt;span style="color:#ce5c00;font-weight:bold">()&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">AWS_ACCESS_KEY_ID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;.....&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">AWS_SECRET_ACCESS_KEY&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;.....&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">AWS_DEFAULT_REGION&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;...&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">AWS_REGION&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;....&amp;#34;&lt;/span>
&lt;span style="color:#8f5902;font-style:italic"># For Terraform Cloud&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">TF_VAR_access_key&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">AWS_ACCESS_KEY_ID&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">TF_VAR_secret_key&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">AWS_SECRET_ACCESS_KEY&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">TF_VAR_slack_webhook_url&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">SLACK_WEBHOOK_NOTIFS&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">TF_VAR_org_email&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;xxxxxx&amp;#34;&lt;/span> &lt;span style="color:#8f5902;font-style:italic"># for Root Account&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">TF_VAR_org_email_domain&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;gmail.com&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">TF_VAR_org_admin_username&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;xxxxxx&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">TF_VAR_admin_ipv4&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;[\&amp;#34;&lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">HOME_IP&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">/32\&amp;#34;]&amp;#34;&lt;/span> &lt;span style="color:#8f5902;font-style:italic"># for WAF&lt;/span>
&lt;span style="color:#ce5c00;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Load environment :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ . ./portefaix.sh aws
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="storage-for-terraform">Storage for Terraform&lt;/h2>
&lt;p>Create a S3 bucket for Terraform states:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/aws.mk aws-s3-bucket &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create a DynamoDB table :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/aws.mk aws-dynamodb-create-table &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="aws-organization-units-and-accounts">AWS Organization Units and Accounts&lt;/h2>
&lt;p>Configure the AWS Organization:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>terraform/aws/root &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>main
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/aws_organization.png" alt="
Portefaix AWS organization" class="mt-3 mb-3 rounded">&lt;/p>
&lt;p>&lt;a id="aws-terraform-cloud">&lt;/a>&lt;/p>
&lt;h2 id="terraform-cloud--github-actions">Terraform Cloud / Github Actions&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://terraform.cloud">Terraform Cloud&lt;/a> is used as the remote backend.&lt;/li>
&lt;li>&lt;a href="https://github.com/features/actions">Github Actions&lt;/a> perform tasks to deploy the AWS infrastructure.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>terraform/aws/terraform-cloud &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>main
&lt;/code>&lt;/pre>&lt;/div>&lt;img src="/docs/images/portefaix-aws-deploy.png" alt="Portefaix AWS deployment" class="mt-3 mb-3 rounded">
&lt;p>&lt;a id="aws-gitops">&lt;/a>&lt;/p>
&lt;h2 id="authentication">Authentication&lt;/h2>
&lt;p>Perform an AWS authentication:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/aws.mk &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging aws-admin
&lt;span style="color:#204a87">source&lt;/span> ./hack/scripts/aws-auth.sh xxxxxx Administrator portefaix-staging-eks eu-west-1
❯ &lt;span style="color:#204a87">source&lt;/span> ./hack/scripts/aws-auth.sh xxxxxxx Administrator portefaix-staging-eks eu-west-1
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Update Kubernetes configuration file:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/aws.mk &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging aws-kube-credentials
❯ kubectl get nodes
NAME STATUS ROLES AGE VERSION
ip-10-0-13-85.eu-west-1.compute.internal Ready &amp;lt;none&amp;gt; 81m v1.23.9-eks-ba74326
ip-10-0-29-115.eu-west-1.compute.internal Ready &amp;lt;none&amp;gt; 81m v1.23.9-eks-ba74326
ip-10-0-60-137.eu-west-1.compute.internal Ready &amp;lt;none&amp;gt; 81m v1.23.9-eks-ba74326
ip-10-0-70-76.eu-west-1.compute.internal Ready &amp;lt;none&amp;gt; 81m v1.23.9-eks-ba74326
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="gitops-for-kubernetes">Gitops for Kubernetes&lt;/h2>
&lt;p>Next: &lt;a href="/docs/gitops">Gitops&lt;/a>&lt;/p></description></item><item><title>Docs: Install Portefaix</title><link>/docs/azure/deploy/install-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/azure/deploy/install-portefaix/</guid><description>
&lt;p>&lt;a id="azure">&lt;/a>&lt;/p>
&lt;h2 id="setup">Setup&lt;/h2>
&lt;p>Export Azure credentials:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ &lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">AZURE_SUBSCRIPTION_ID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;xxxxxx&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="storage-for-terraform">Storage for Terraform&lt;/h2>
&lt;p>Create a &lt;a href="https://portal.azure.com/#create/Microsoft.StorageAccount">Storage Account&lt;/a> :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/azure.mk azure-storage-account &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
XXXXXXXXXXX
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You could see the Key on the output.&lt;/p>
&lt;p>Create storage container for Terraform states:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/azure.mk azure-storage-container &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev &lt;span style="color:#000">KEY&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;xxxxxxxxxxxxxxxxx&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create the Service Principal for Terraform:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/azure.mk azure-sp &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;span style="color:#ce5c00;font-weight:bold">{&lt;/span>
&lt;span style="color:#4e9a06">&amp;#34;appId&amp;#34;&lt;/span>: &lt;span style="color:#4e9a06">&amp;#34;xxxxxxxxxxxxxxxxx&amp;#34;&lt;/span>,
&lt;span style="color:#4e9a06">&amp;#34;displayName&amp;#34;&lt;/span>: &lt;span style="color:#4e9a06">&amp;#34;portefaix-dev&amp;#34;&lt;/span>,
&lt;span style="color:#4e9a06">&amp;#34;name&amp;#34;&lt;/span>: &lt;span style="color:#4e9a06">&amp;#34;http://portefaix-dev&amp;#34;&lt;/span>,
&lt;span style="color:#4e9a06">&amp;#34;password&amp;#34;&lt;/span>: &lt;span style="color:#4e9a06">&amp;#34;xxxxxxxxxxxx&amp;#34;&lt;/span>,
&lt;span style="color:#4e9a06">&amp;#34;tenant&amp;#34;&lt;/span>: &lt;span style="color:#4e9a06">&amp;#34;xxxxxxxxxxxx&amp;#34;&lt;/span>
&lt;span style="color:#ce5c00;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Extract informations and configure portefaix configuration file (&lt;code>hack/config/portefaix.sh&lt;/code>):&lt;/p>
&lt;ul>
&lt;li>&lt;code>SUBSCRIPTION_ID&lt;/code>&lt;/li>
&lt;li>&lt;code>CLIENT_ID&lt;/code>&lt;/li>
&lt;li>&lt;code>CLIENT_SECRET&lt;/code>&lt;/li>
&lt;li>&lt;code>ARM_TENANT_ID&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>And load environment :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ . ./portefaix.sh azure
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Set permissions:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/azure.mk azure-permissions &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="terraform">Terraform&lt;/h2>
&lt;p>&lt;a href="https://github.com/features/actions">Github Actions&lt;/a> with &lt;a href="https://www.terraform.io/cloud">Terraform Cloud&lt;/a> could used to deploy the infrastructure:&lt;/p>
&lt;img src="/docs/images/portefaix-azure-deploy.png" alt="Portefaix Azure deployment" class="mt-3 mb-3 rounded">
&lt;h2 id="gitops-for-kubernetes">Gitops for Kubernetes&lt;/h2>
&lt;p>Next: &lt;a href="/docs/gitops">Gitops&lt;/a>&lt;/p></description></item><item><title>Docs: Install Portefaix</title><link>/docs/civo/deploy/install-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/civo/deploy/install-portefaix/</guid><description>
&lt;p>&lt;a id="civo">&lt;/a>&lt;/p>
&lt;h2 id="setup">Setup&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">&lt;span style="color:#8f5902;font-style:italic"># Civo&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">CIVO_TOKEN&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;xxxxxxxxxxxxxxxx&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And load environment :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ . ./portefaix.sh civo
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="storage-for-terraform">Storage for Terraform&lt;/h2>
&lt;div class="alert alert-warning" role="alert">
&lt;h4 class="alert-heading">Work In Progress&lt;/h4>
&lt;/div>
&lt;h2 id="terraform">Terraform&lt;/h2>
&lt;h3 id="network">Network&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>terraform/civo/network &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="kubernetes">Kubernetes&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>terraform/civo/kubernetes &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="gitops-for-kubernetes">Gitops for Kubernetes&lt;/h2>
&lt;p>Next: &lt;a href="/docs/gitops">Gitops&lt;/a>&lt;/p></description></item><item><title>Docs: Install Portefaix</title><link>/docs/digitalocean/deploy/install-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/digitalocean/deploy/install-portefaix/</guid><description>
&lt;p>&lt;a id="do">&lt;/a>&lt;/p>
&lt;h2 id="setup">Setup&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">&lt;span style="color:#8f5902;font-style:italic"># Digital Ocean&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">function&lt;/span> setup_digitalocean&lt;span style="color:#ce5c00;font-weight:bold">()&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">DIGITALOCEAN_TOKEN&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;xxxxxxxxxxxx&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">SPACES_ENDPOINT_URL&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;fra1.digitaloceanspaces.com&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">SPACES_ACCESS_KEY_ID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;xxxxxxxxxx&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">SPACES_SECRET_ACCESS_KEY&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;xxxxxxxxxxxxxxx&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">AWS_ACCESS_KEY_ID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">SPACES_ACCESS_KEY_ID&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">AWS_SECRET_ACCESS_KEY&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">SPACES_SECRET_ACCESS_KEY&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">AWS_DEFAULT_REGION&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;eu-west-3&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">AWS_REGION&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;eu-west-3&amp;#34;&lt;/span>
&lt;span style="color:#ce5c00;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And load environment :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ . ./portefaix.sh digitalocean
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="storage-for-terraform">Storage for Terraform&lt;/h2>
&lt;p>Create a S3 bucket for Terraform states:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/digitalocean.mk exo-bucket &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="gitops-for-kubernetes">Gitops for Kubernetes&lt;/h2>
&lt;p>Next: &lt;a href="/docs/gitops">Gitops&lt;/a>&lt;/p></description></item><item><title>Docs: Install Portefaix</title><link>/docs/exoscale/deploy/install-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/exoscale/deploy/install-portefaix/</guid><description>
&lt;p>&lt;a id="exo">&lt;/a>&lt;/p>
&lt;h2 id="setup">Setup&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">&lt;span style="color:#8f5902;font-style:italic"># AWS&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">EXOSCALE_API_KEY&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;xxxxx&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">EXOSCALE_API_SECRET&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;xxxxxxxxxxx&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">AWS_ACCESS_KEY_ID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">EXOSCALE_API_KEY&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">AWS_SECRET_ACCESS_KEY&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">EXOSCALE_API_SECRET&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And load environment :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ . ./portefaix.sh exoscale
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="storage-for-terraform">Storage for Terraform&lt;/h2>
&lt;p>Create a S3 bucket for Terraform states:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/exoscale.mk exo-bucket &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="terraform">Terraform&lt;/h2>
&lt;h3 id="sks">SKS&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/exoscale/sks &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="gitops-for-kubernetes">Gitops for Kubernetes&lt;/h2>
&lt;p>Next: &lt;a href="/docs/gitops">Gitops&lt;/a>&lt;/p></description></item><item><title>Docs: Install Portefaix</title><link>/docs/gcp/deploy/install-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/gcp/deploy/install-portefaix/</guid><description>
&lt;p>&lt;a id="gcloud"/>&lt;/a>&lt;/p>
&lt;h2 id="organization">Organization&lt;/h2>
&lt;p>Create a Google Cloud Organization using &lt;strong>Google Workspace&lt;/strong> or &lt;strong>Cloud Identity&lt;/strong>&lt;/p>
&lt;p>See: &lt;a href="https://cloud.google.com/resource-manager/docs/creating-managing-organization?hl=fr">https://cloud.google.com/resource-manager/docs/creating-managing-organization?hl=fr&lt;/a>&lt;/p>
&lt;h2 id="bootstrap">Bootstrap&lt;/h2>
&lt;p>Authenticate on the Google Cloud Platform:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ gcloud auth application-default login
xxxxxxxxxx
❯ gcloud organizations list
DISPLAY_NAME ID DIRECTORY_CUSTOMER_ID
xxxxxxx xxxxxx xxxxxxxx
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Bootstrap the organization:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/gcp.mk gcp-organization-bootstrap &lt;span style="color:#000">GCP_ORG_ID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>xxxxxxxxxxx &lt;span style="color:#000">GCP_USER&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>xxxxxxxxxxxxxxxxx
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Then go to &lt;a href="https://console.cloud.google.com/cloud-setup/organization">https://console.cloud.google.com/cloud-setup/organization&lt;/a> to creates groups and create the billing account.&lt;/p>
&lt;p>Then create the bootstrap project:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/gcp.mk gcp-organization-project &lt;span style="color:#000">GCP_ORG_NAME&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>xxxx &lt;span style="color:#000">GCP_ORG_ID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>xxxxxxxxxxx
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Associate this project to the Billing Account (on GCP console or using gcloud):&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">gcloud alpha billing accounts projects link my-project --billing-account&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>xxxxxxx
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Then create the bucket for boostraping the organization:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/gcp.mk gcp-bucket &lt;span style="color:#000">GCP_ORG_NAME&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>xxxxxxx
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Enable APIs:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/gcp.mk gcp-enable-apis &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create a bucket for the Terraform tfstates:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/gcp.mk gcp-bucket &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create a service account for Terraform:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/gcp.mk gcp-terraform-sa &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And a key:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/gcp.mk gcp-terraform-key &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Configure Portefaix environment file &lt;code>${HOME}/.config/portefaix/portefaix.sh&lt;/code>:&lt;/p>
&lt;p>And load environment :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ . ./portefaix.sh gcp
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;a id="gcp-terraform-cloud">&lt;/a>&lt;/p>
&lt;h2 id="terraform-cloud--github-actions">Terraform Cloud / Github Actions&lt;/h2>
&lt;p>&lt;a href="https://terraform.cloud">Terraform Cloud&lt;/a> is used as the remote backend. &lt;a href="https://github.com/features/actions">Github Actions&lt;/a> perform tasks to deploy the GCP infrastructure.&lt;/p>
&lt;p>Configure Terraform Cloud workspaces:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>terraform/gcp/terraform-cloud &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;img src="/docs/images/portefaix-gcp-deploy.png" alt="Portefaix GCP deployment" class="mt-3 mb-3 rounded">
&lt;p>&lt;a id="gcp-gitops">&lt;/a>&lt;/p>
&lt;h2 id="gitops-for-kubernetes">Gitops for Kubernetes&lt;/h2>
&lt;p>Next: &lt;a href="/docs/gitops">Gitops&lt;/a>&lt;/p></description></item><item><title>Docs: Install Portefaix</title><link>/docs/homelab/deploy/install-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/homelab/deploy/install-portefaix/</guid><description>
&lt;p>&lt;img src="/docs/images/portefaix_homelab_infra.png"
alt="Portefaix infrastructure"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;p>&lt;a id="os"/>&lt;/a>&lt;/p>
&lt;h2 id="operating-system">Operating System&lt;/h2>
&lt;p>Setup operating system for Raspberry PI.&lt;/p>
&lt;p>See: &lt;a href="https://www.raspberrypi.org/software/">https://www.raspberrypi.org/software/&lt;/a>&lt;/p>
&lt;p>Or:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ sudo dd &lt;span style="color:#204a87;font-weight:bold">if&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>/dev/zero &lt;span style="color:#000">of&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>/dev/mmcblk0 &lt;span style="color:#000">conv&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>noerror &lt;span style="color:#000">status&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>progress
❯ sudo./hack/scripts/sdcard.sh &amp;lt;hostname&amp;gt; /dev/mmcblk0
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Enable SSH :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/k3s.mk sdcard-mount &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>homelab
❯ sudo touch /mnt/portefaix/boot/ssh
❯ &lt;span style="color:#204a87">echo&lt;/span> portefaix-xxx &lt;span style="color:#000;font-weight:bold">|&lt;/span> sudo tee /mnt/portefaix/root/etc/hostname
❯ make -f hack/build/k3s.mk sdcard-unmount &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>homelab
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Copy keys to each node:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">ssh-copy-id -i ~/.ssh/id_rsa.pub pi@x.x.x.x
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ansible">Ansible&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/k3s.mk ansible-deps &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>ansible/k3s/machines &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>homelab
❯ make -f hack/build/k3s.mk ansible-run &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>ansible/k3s/machines &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>homelab
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="k3sup">K3Sup&lt;/h2>
&lt;p>Create the master :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/k3s.mk k3s-create &lt;span style="color:#000">SERVER_IP&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>x.x.x.x &lt;span style="color:#000">USER&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>pi &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>homelab
&lt;/code>&lt;/pre>&lt;/div>&lt;p>For each node, add it to the cluster:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/k3s.mk k3s-join &lt;span style="color:#000">SERVER_IP&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>x.x.x.x &lt;span style="color:#000">USER&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>pi &lt;span style="color:#000">AGENT_IP&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>x.x.x.x &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>homelab
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Check Kubernetes cluster:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/k3s.mk k3s-kube-credentials &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>homelab
❯ kubectl get node -o wide
NAME STATUS ROLES AGE VERSION INTERNAL-IP EXTERNAL-IP OS-IMAGE KERNEL-VERSION CONTAINER-RUNTIME
portefaix-4 Ready &amp;lt;none&amp;gt; 32d v1.21.4+k3s1 192.168.1.32 &amp;lt;none&amp;gt; Debian GNU/Linux &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>buster&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> 5.10.17-v8+ containerd://1.4.9-k3s1
portefaix-1 Ready control-plane,master 32d v1.21.4+k3s1 192.168.1.4 &amp;lt;none&amp;gt; Debian GNU/Linux &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>buster&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> 5.10.17-v8+ containerd://1.4.9-k3s1
portefaix-3 Ready &amp;lt;none&amp;gt; 32d v1.21.4+k3s1 192.168.1.30 &amp;lt;none&amp;gt; Debian GNU/Linux &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>buster&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> 5.10.17-v8+ containerd://1.4.9-k3s1
portefaix-5 Ready &amp;lt;none&amp;gt; 129m v1.21.4+k3s1 192.168.1.126 &amp;lt;none&amp;gt; Debian GNU/Linux &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>buster&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> 5.10.63-v8+ containerd://1.4.9-k3s1
portefaix-2 Ready &amp;lt;none&amp;gt; 32d v1.21.4+k3s1 192.168.1.123 &amp;lt;none&amp;gt; Debian GNU/Linux &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>buster&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> 5.10.17-v8+ containerd://1.4.9-k3s1
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="taints">Taints&lt;/h2>
&lt;p>We could taint the master &lt;code>portefaix-1&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ kubectl taint nodes portefaix-1 node.kubernetes.io/gitops:NoSchedule
&lt;/code>&lt;/pre>&lt;/div>&lt;p>We could taint the Raspiberry PI 3:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ kubectl taint nodes portefaix-2 node.kubernetes.io/legacy:NoSchedule
❯ kubectl taint nodes portefaix-3 node.kubernetes.io/legacy:NoSchedule
❯ kubectl taint nodes portefaix-4 node.kubernetes.io/legacy:NoSchedule
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="applications">Applications&lt;/h2>
&lt;p>Next: &lt;a href="/docs/gitops">Gitops&lt;/a>&lt;/p></description></item><item><title>Docs: Install Portefaix</title><link>/docs/ibmcloud/deploy/install-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/ibmcloud/deploy/install-portefaix/</guid><description>
&lt;p>&lt;a id="exo">&lt;/a>&lt;/p>
&lt;h2 id="setup">Setup&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">&lt;span style="color:#8f5902;font-style:italic"># IBMCloud&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">IAAS_CLASSIC_USERNAME&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;xxxxxxxxxxxx&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">IC_API_KEY&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;xxxxxxxxxxxxxx&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">IAAS_CLASSIC_API_KEY&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;xxxxxxxxxxxxxxxxx&amp;#34;&lt;/span>
&lt;span style="color:#8f5902;font-style:italic"># For Terraform Backend S3&lt;/span>
&lt;span style="color:#8f5902;font-style:italic"># See &lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And load environment :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ . ./portefaix.sh ibmcloud
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Authentication:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/ibmcloud.mk ibmcloud-init &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Then, generate the right set of HMAC credentials : &lt;a href="https://www.ibm.com/cloud/blog/store-terraform-states-cloud-object-storage">documentation&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ &lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">AWS_ACCESS_KEY_ID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;xxxxxxxxxx&amp;#34;&lt;/span>
❯ &lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">AWS_SECRET_ACCESS_KEY&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;xxxxxxxxxxxxxxx&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="storage-for-terraform">Storage for Terraform&lt;/h2>
&lt;p>Create a S3 bucket for Terraform states:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/ibmcloud.mk ibmcloud-bucket-create &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="terraform">Terraform&lt;/h2>
&lt;h3 id="vpc">VPC&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>terraform/ibmcloud/vpc &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="iks">IKS&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>terraform/ibmcloud/iks &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="gitops-for-kubernetes">Gitops for Kubernetes&lt;/h2>
&lt;p>Next: &lt;a href="/docs/gitops">Gitops&lt;/a>&lt;/p></description></item><item><title>Docs: Install Portefaix</title><link>/docs/oci/deploy/install-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/oci/deploy/install-portefaix/</guid><description>
&lt;p>&lt;a id="oci">&lt;/a>&lt;/p>
&lt;h2 id="setup">Setup&lt;/h2>
&lt;p>Configure Oracle CLI. See &lt;a href="https://docs.oracle.com/en-us/iaas/Content/API/Concepts/apisigningkey.htm">https://docs.oracle.com/en-us/iaas/Content/API/Concepts/apisigningkey.htm&lt;/a>&lt;/p>
&lt;p>Load environment :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ . ./portefaix.sh oci
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Then authentication:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/oci.mk oci-authenticate &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="create-a-new-compartment">Create a new compartment&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/oci.mk oci-compartment &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="storage-for-terraform">Storage for Terraform&lt;/h2>
&lt;p>Check compartement ID from output of the previous command and create a S3 bucket for Terraform states:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/oci.mk oci-bucket &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging &lt;span style="color:#000">COMPARTMENT_ID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>ocid1.compartment.oc1....
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="gitops-for-kubernetes">Gitops for Kubernetes&lt;/h2>
&lt;p>Next: &lt;a href="/docs/gitops">Gitops&lt;/a>&lt;/p></description></item><item><title>Docs: Install Portefaix</title><link>/docs/scaleway/deploy/install-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/scaleway/deploy/install-portefaix/</guid><description>
&lt;p>&lt;a id="scaleway">&lt;/a>&lt;/p>
&lt;h2 id="setup">Setup&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">&lt;span style="color:#8f5902;font-style:italic"># Scaleway&lt;/span>
&lt;span style="color:#204a87;font-weight:bold">function&lt;/span> setup_scaleway&lt;span style="color:#ce5c00;font-weight:bold">()&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">{&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">SCW_ACCESS_KEY&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;xxxxx&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">SCW_SECRET_KEY&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;xxxx&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">SCW_DEFAULT_PROJECT_ID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;xxxx&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">SCW_DEFAULT_ORGANIZATION_ID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">SCW_DEFAULT_PROJECT_ID&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">AWS_ACCESS_KEY_ID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">SCW_ACCESS_KEY&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">AWS_SECRET_ACCESS_KEY&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">SCW_SECRET_KEY&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">AWS_DEFAULT_REGION&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;eu-west-3&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">AWS_REGION&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;eu-west-3&amp;#34;&lt;/span>
&lt;span style="color:#ce5c00;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And load environment :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ . ./portefaix.sh scaleway
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="storage-for-terraform">Storage for Terraform&lt;/h2>
&lt;p>Create a S3 bucket for Terraform states:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/scw.mk scw-bucket &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>sandbox
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="terraform">Terraform&lt;/h2>
&lt;h3 id="sks">SKS&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/scaleway/kapsule &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>sandbox
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="gitops-for-kubernetes">Gitops for Kubernetes&lt;/h2>
&lt;p>Next: &lt;a href="/docs/gitops">Gitops&lt;/a>&lt;/p></description></item><item><title>Docs: Overview</title><link>/docs/started/overview/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/started/overview/</guid><description>
&lt;p>This document provides information about setting up Portefaix in various
environments.&lt;/p>
&lt;h2 id="before-you-begin">Before you begin&lt;/h2>
&lt;p>It&amp;rsquo;s important that you have some knowledge of the following systems and tools:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://terraform.io">Terraform&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://kubernetes.io/docs/tutorials/kubernetes-basics/">Kubernetes&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://kustomize.io/">Kustomize&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://helm.sh">Helm&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Docs: ArgoCD</title><link>/docs/gitops/gitops-argocd/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/gitops/gitops-argocd/</guid><description>
&lt;img src="/docs/images/argocd_architecture.png" alt="Argo-CD" class="mt-3 mb-3 border border-info rounded">
&lt;h2 id="organization">Organization&lt;/h2>
&lt;ul>
&lt;li>&lt;code>gitops/argocd/bootstrap&lt;/code> : Argo-CD deployment&lt;/li>
&lt;li>&lt;code>gitops/argocd/stacks&lt;/code> : Portefaix stacks : Argo-CD projects and applications&lt;/li>
&lt;li>&lt;code>gitops/argocd/apps/&amp;lt;CLOUD&amp;gt;/&amp;lt;ENVIRONMENT&amp;gt;&lt;/code> : Argo-CD applications deployed into the Kubernetes cluster&lt;/li>
&lt;li>&lt;code>gitops/argocd/charts&lt;/code> : Helm charts configurations&lt;/li>
&lt;/ul>
&lt;p>To configure the Helm charts, we use YAML files :&lt;/p>
&lt;ul>
&lt;li>&lt;code>values.yaml&lt;/code>: common configuration to all Kubernetes cluster&lt;/li>
&lt;li>&lt;code>values-&amp;lt;CLOUD&amp;gt;-&amp;lt;ENVIRONMENT&amp;gt;.yaml&lt;/code> : configuration of the Helm chart for a Kubernetes cluster&lt;/li>
&lt;/ul>
&lt;h2 id="bootstrap">Bootstrap&lt;/h2>
&lt;h3 id="argo-cd">Argo-CD&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make argocd-bootstrap &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;environment&amp;gt; &lt;span style="color:#000">CLOUD&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;cloud provider&amp;gt; &lt;span style="color:#000">CHOICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>helm
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="stacks">Stacks&lt;/h3>
&lt;p>Install a stack into the cluster:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make argocd-stack-install &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;environment&amp;gt; &lt;span style="color:#000">CLOUD&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;cloud provider&amp;gt; &lt;span style="color:#000">STACK&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;stack name&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;img src="/docs/images/argocd_stacks.png" alt="Argo-CD Stacks" class="mt-3 mb-3 border border-info rounded">
&lt;p>You can list stack installed:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ helm list -A
NAME NAMESPACE REVISION UPDATED STATUS CHART APP VERSION
argo-cd argocd &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> 2022-06-08 07:40:20.039787662 +0200 CEST deployed argo-cd-1.0.0 4.5.0
core argocd &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> 2022-06-08 07:42:03.285558277 +0200 CEST deployed stack-0.1.0 0.1.0
system argocd &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> 2022-06-08 07:41:21.749647011 +0200 CEST deployed stack-0.1.0 0.1.0
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Argo-CD applications installs others Argo-CD applications :&lt;/p>
&lt;img src="/docs/images/argocd_app_observability.png" alt="Argo-CD Observability" class="mt-3 mb-3 border border-info rounded">
&lt;img src="/docs/images/argocd_app_grafana.png" alt="Argo-CD Grafana" class="mt-3 mb-3 border border-info rounded">
&lt;p>Go to Argo-CD dashboard, you will see Argo-CD corresponding applications.&lt;/p>
&lt;p>You can list &lt;strong>Stack&lt;/strong> applications using the labels &lt;code>app.kubernetes.io/component: portefaix-stack&lt;/code>&lt;/p>
&lt;h2 id="secrets">Secrets&lt;/h2>
&lt;p>&lt;a href="https://github.com/bitnami-labs/sealed-secrets">sealed-secrets&lt;/a> is used to store secrets into Kubernetes.&lt;/p>
&lt;p>Fetch the certificate that you will use to encrypt your secrets, and store it into &lt;code>.secrets/&amp;lt;CLOUD&amp;gt;/&amp;lt;ENV&amp;gt;/sealed-secrets/cert.pem&lt;/code> :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ kubeseal --fetch-cert --controller-name&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>sealed-secrets -n kube-system &amp;gt; .secrets/aws/staging/sealed-secrets/cert.pm
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create a SealedSecrets from a file :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make kubeseal-encrypt &lt;span style="color:#000">CLOUD&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>aws &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> &lt;span style="color:#000">FILE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>.secrets/aws/staging/kube-prometheus-stack/object-store.yaml &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> &lt;span style="color:#000">NAME&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>thanos-objstore-config &lt;span style="color:#000">NAMESPACE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>monitoring &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span> &amp;gt; ./gitops/argocd/apps/aws/staging/apps/thanos-objstore-config.yaml
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: Continuous Integration</title><link>/docs/other-guides/cicd/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/other-guides/cicd/</guid><description>
&lt;h2 id="github-actions">Github Actions&lt;/h2>
&lt;p>&lt;a href="https://github.com/features/actions">Github Actions&lt;/a> is used.&lt;/p>
&lt;div class="table-responsive">
&lt;table class="table table-bordered">
&lt;thead class="thead-light">
&lt;tr>
&lt;th>Cloud Provider&lt;/th>
&lt;th>Create (Terraform)&lt;/th>
&lt;th>Destroy (Terraform)&lt;/th>
&lt;th>Check (Inspec)&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Google Cloud Platform&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Amazon AWS&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Microsoft Azure&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>AlibabaCloud&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Scaleway&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Digital Ocean&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;/div></description></item><item><title>Docs: Getting Started</title><link>/docs/started/getting-started/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/started/getting-started/</guid><description>
&lt;h2 id="installation">Installation&lt;/h2>
&lt;p>&lt;a id="installation-guides">&lt;/a>&lt;/p>
&lt;h2 id="installing-portefaix">Installing Portefaix&lt;/h2>
&lt;p>There are various ways to install Portefaix. Choose one of the following options
to suit your environment (public cloud, existing Kubernetes cluster, or
a single-node cluster which you can use on a desktop or server or in the cloud).&lt;/p>
&lt;p>&lt;a id="cloud">&lt;/a>&lt;/p>
&lt;h3 id="installing-portefaix-on-a-public-cloud">Installing Portefaix on a public cloud&lt;/h3>
&lt;p>Choose the Portefaix deployment guide for your chosen cloud:&lt;/p>
&lt;ul>
&lt;li>To use Portefaix on Google Kubernetes Engine (GKE), follow the &lt;a href="/docs/gcp/deploy/">GKE deployment guide&lt;/a>.&lt;/li>
&lt;li>To use Portefaix on Amazon Elastic Kubernetes Service (EKS), follow the &lt;a href="/docs/aws/deploy/">EKS deployment guide&lt;/a>.&lt;/li>
&lt;li>To use Portefaix on Microsoft Azure Kubernetes Service (AKS), follow the &lt;a href="/docs/azure/deploy/">AKS deployment guide&lt;/a>.&lt;/li>
&lt;li>To use Portefaix on AlibabaCloud Container Service for Kubernetes (ACK), follow the &lt;a href="/docs/alicloud/deploy">ACK deployment guide&lt;/a>.&lt;/li>
&lt;li>To use Portefaix as your Homelab, follow the &lt;a href="/docs/homelab/deploy">Raspberry PI Homelab&lt;/a>.&lt;/li>
&lt;/ul>
&lt;!-- * To use Portefaix on IBM Cloud (IKS),
follow the [IKS deployment guide](/docs/ibm/). -->
&lt;h2 id="deployment-quick-reference">Deployment quick reference&lt;/h2>
&lt;p>Below is a matrix of the platforms where you can deploy Portefaix and the
corresponding tools for each platform.&lt;/p>
&lt;div class="table-responsive">
&lt;table class="table table-bordered">
&lt;thead class="thead-light">
&lt;tr>
&lt;th>Cloud Provider&lt;/th>
&lt;th>Github Actions&lt;/th>
&lt;th>Terraform Cloud&lt;/th>
&lt;th>Tfsec&lt;/th>
&lt;th>Inspec&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Google Cloud Platform&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Amazon AWS&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Microsoft Azure&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>AlibabaCloud&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Scaleway&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Exoscale&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Vultr&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>IBMCloud&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Digital Ocean&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Civo&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>K3S&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Kind&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;/div>
&lt;h2 id="troubleshooting">Troubleshooting&lt;/h2>
&lt;p>See the &lt;a href="/docs/other-guides/troubleshooting/">Portefaix troubleshooting guide&lt;/a>.&lt;/p></description></item><item><title>Docs: Inspec Portefaix</title><link>/docs/alicloud/deploy/inspec-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/alicloud/deploy/inspec-portefaix/</guid><description>
&lt;p>&lt;a href="http://inspec.io/">Inspec&lt;/a> is used to check infrastructure.&lt;/p>
&lt;p>Check:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/alicloud.mk inspec-alicloud-debug
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Execute tests:&lt;/p>
&lt;div class="alert alert-warning" role="alert">
&lt;h4 class="alert-heading">Work In Progress&lt;/h4>
&lt;/div>
&lt;h2 id="cis-kubernetes-benchmark">CIS Kubernetes Benchmark&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/alicloud.mk inspec-alicloud-kubernetes &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: Inspec Portefaix</title><link>/docs/aws/deploy/inspec-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/aws/deploy/inspec-portefaix/</guid><description>
&lt;p>&lt;a href="http://inspec.io/">Inspec&lt;/a> is used to check infrastructure.&lt;/p>
&lt;p>Check:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/aws.mk inspec-debug
Test infrastructure
────────────────────────────── Platform Details ──────────────────────────────
Name: aws
Families: cloud, api
Release: train-aws: v0.1.15, aws-sdk-core: v3.94.0
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Execute tests:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/aws.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/&amp;lt;SERVICE&amp;gt; &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You could upload JSON results file to &lt;a href="https://heimdall-lite.mitre.org/">Heimdall Lite&lt;/a> to display ressults&lt;/p>
&lt;h2 id="cis-aws-foundations-benchmark">CIS AWS Foundations Benchmark&lt;/h2>
&lt;p>You could perform tests according to the &lt;a href="https://docs.aws.amazon.com/securityhub/latest/userguide/securityhub-standards-cis.html">CIS AWS Foundations Benchmark&lt;/a>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/aws.mk inspec-aws-cis &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="cis-kubernetes-benchmark">CIS Kubernetes Benchmark&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/aws.mk inspec-aws-kubernetes &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="vpc">VPC&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/aws.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/vpc &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-aws-vpc.png"
alt="VPC"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>vpc-1&lt;/code>&lt;/td>
&lt;td>Ensure that VPC exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>vpc-2&lt;/code>&lt;/td>
&lt;td>Ensure that VPC have an Internet Gateway&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>vpc-3&lt;/code>&lt;/td>
&lt;td>Check AWS Security Groups does not have undesirable rules&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>vpc-4&lt;/code>&lt;/td>
&lt;td>Ensure that VPC Subnets exists&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="eks">EKS&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/aws.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/eks &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-aws-eks.png"
alt="EKS"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>eks-1&lt;/code>&lt;/td>
&lt;td>Ensure the AWS EKS Cluster is running a minimal version&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>eks-2&lt;/code>&lt;/td>
&lt;td>Ensure the AWS EKS Cluster control plane has audit logs enabled&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>eks-3&lt;/code>&lt;/td>
&lt;td>Ensure the AWS EKS Cluster is not public&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>eks-4&lt;/code>&lt;/td>
&lt;td>Ensure the AWS EKS Cluster has application secrets encryption enabled&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>eks-5&lt;/code>&lt;/td>
&lt;td>Ensure AWS EKS Cluster Subnets are specific&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>eks-6&lt;/code>&lt;/td>
&lt;td>Ensure AWS EKS Cluster Nodegroups do not allow remote access from all IPs&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="sops">Sops&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/aws.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/sops &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-aws-sops.png"
alt="Sops"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>sops-1&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>sops-2&lt;/code>&lt;/td>
&lt;td>Ensure IAM roles and policies exists&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="observability">Observability&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/aws.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/observability &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-aws-observability.png"
alt="Observability"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>grafana-1&lt;/code>&lt;/td>
&lt;td>Ensure IAM roles and policies exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>prometheus-1&lt;/code>&lt;/td>
&lt;td>Ensure IAM roles and policies exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>thanos-1&lt;/code>&lt;/td>
&lt;td>Ensure that S3 bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>thanos-2&lt;/code>&lt;/td>
&lt;td>Ensure that S3 log bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>thanos-3&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>thanos-4&lt;/code>&lt;/td>
&lt;td>Ensure IAM roles and policies exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>loki-1&lt;/code>&lt;/td>
&lt;td>Ensure that S3 bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>loki-2&lt;/code>&lt;/td>
&lt;td>Ensure that S3 log bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>loki-3&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>loki-4&lt;/code>&lt;/td>
&lt;td>Ensure IAM roles and policies exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>tempo-1&lt;/code>&lt;/td>
&lt;td>Ensure that S3 bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>tempo-2&lt;/code>&lt;/td>
&lt;td>Ensure that S3 log bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>tempo-3&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>tempo-4&lt;/code>&lt;/td>
&lt;td>Ensure IAM roles and policies exists&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="velero">Velero&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/aws.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/velero &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-aws-velero.png"
alt="Velero"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>velero-1&lt;/code>&lt;/td>
&lt;td>Ensure that S3 bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>velero-2&lt;/code>&lt;/td>
&lt;td>Ensure that S3 log bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>velero-3&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>velero-4&lt;/code>&lt;/td>
&lt;td>Ensure IAM roles and policies exists&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="vector">Vector&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/aws.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/vector &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-aws-vector.png"
alt="Vector"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>vector-1&lt;/code>&lt;/td>
&lt;td>Ensure that S3 bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>vector-2&lt;/code>&lt;/td>
&lt;td>Ensure that S3 log bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>vector-3&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>vector-4&lt;/code>&lt;/td>
&lt;td>Ensure IAM roles and policies exists&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Docs: Inspec Portefaix</title><link>/docs/azure/deploy/inspec-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/azure/deploy/inspec-portefaix/</guid><description>
&lt;h2 id="inspec">Inspec&lt;/h2>
&lt;p>&lt;a href="http://inspec.io/">inspec&lt;/a> is used to check infrastructure.&lt;/p>
&lt;p>Check:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/azure.mk inspec-debug
Test infrastructure
────────────────────────────── Platform Details ──────────────────────────────
Name: azure
Families: cloud, api
Release: azure_mgmt_resources-v0.17.8
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Execute tests:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/azure.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/azure/&amp;lt;SERVICE&amp;gt; &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You could upload JSON results file to &lt;a href="https://heimdall-lite.mitre.org/">Heimdall Lite&lt;/a> to display ressults&lt;/p>
&lt;h3 id="microsoft-azure-cis-foundations">Microsoft Azure CIS Foundations&lt;/h3>
&lt;p>You could perform tests accoring the &lt;a href="https://azure.microsoft.com/fr-fr/resources/cis-microsoft-azure-foundations-security-benchmark/">CIS Microsoft Azure Foundations Security Benchmark&lt;/a>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/azure.mk inspec-cis &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="aks">AKS&lt;/h3>
&lt;p>&lt;img src="/docs/images/inspec-azure-aks.png"
alt="AKS"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>resourcegroup-1&lt;/code>&lt;/td>
&lt;td>Check that resource group exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>aks-1&lt;/code>&lt;/td>
&lt;td>Ensure logging to Azure Monitor is configured&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>aks-2&lt;/code>&lt;/td>
&lt;td>Ensure RBAC is enabled&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>aks-3&lt;/code>&lt;/td>
&lt;td>Ensure API Server Authorized IP Ranges are configured&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Docs: Inspec Portefaix</title><link>/docs/digitalocean/deploy/inspec-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/digitalocean/deploy/inspec-portefaix/</guid><description>
&lt;div class="alert alert-warning" role="alert">
&lt;h4 class="alert-heading">Not Available&lt;/h4>
&lt;/div></description></item><item><title>Docs: Inspec Portefaix</title><link>/docs/exoscale/deploy/inspec-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/exoscale/deploy/inspec-portefaix/</guid><description>
&lt;div class="alert alert-warning" role="alert">
&lt;h4 class="alert-heading">Not Available&lt;/h4>
&lt;/div></description></item><item><title>Docs: Inspec Portefaix</title><link>/docs/gcp/deploy/inspec-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/gcp/deploy/inspec-portefaix/</guid><description>
&lt;p>&lt;a href="http://inspec.io/">inspec&lt;/a> is used to check infrastructure:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/gcp.mk inspec-debug
Test infrastructure
────────────────────────────── Platform Details ──────────────────────────────
Name: gcp
Families: cloud, api
Release: google-api-client-v0.34.1
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Execute tests:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/gcp.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/gcp/&amp;lt;SERVICE&amp;gt; &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You could upload JSON results file to &lt;a href="https://heimdall-lite.mitre.org/">Heimdall Lite&lt;/a> to display ressults&lt;/p>
&lt;h2 id="cis-kubernetes-benchmark">CIS Kubernetes Benchmark&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/gcp.mk inspec-gcp-kubernetes &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="gcp-cis">GCP CIS&lt;/h2>
&lt;p>You could perform tests accoring the &lt;a href="https://opensource.googleblog.com/2020/08/assess-security-of-cloud-deployments.html">GCP CIS&lt;/a>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/gcp.mk inspec-cis &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="vpc">VPC&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/gcp.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/gcp/vpc &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-gcp-vpc.png"
alt="VPC"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>vpc-1&lt;/code>&lt;/td>
&lt;td>Ensure default network is deleted&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>vpc-2&lt;/code>&lt;/td>
&lt;td>Ensure network is correctly configure&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="gke">GKE&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/gcp.mk gcp-inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/gcp/gke &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-gcp-gke.png"
alt="GKE"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>gke-1&lt;/code>&lt;/td>
&lt;td>Stackdriver Logging and Monitoring is configured&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>gke-2&lt;/code>&lt;/td>
&lt;td>Basic Authentication is disabled&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>gke-3&lt;/code>&lt;/td>
&lt;td>Ensure GKE Nodes are not public&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>gke-4&lt;/code>&lt;/td>
&lt;td>Ensure the GKE Control Plane is not public&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>gke-5&lt;/code>&lt;/td>
&lt;td>Ensure the Network Policy managed addon is enabled&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>gke-6&lt;/code>&lt;/td>
&lt;td>Ensure OAuth Access Scopes and dedicated Service Accounts for node pools&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>gke-7&lt;/code>&lt;/td>
&lt;td>Ensure GKE Node Pools should use the COS or COS_CONTAINERD Operating System&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>gke-8&lt;/code>&lt;/td>
&lt;td>GKE Workload Identity should be enabled on all node pools&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>gke-9&lt;/code>&lt;/td>
&lt;td>GKE Shielded Nodes should be enabled on all NodePools&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>gke-10&lt;/code>&lt;/td>
&lt;td>Ensure instances have labels&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>gke-11&lt;/code>&lt;/td>
&lt;td>Ensure instances have tags&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="sops">Sops&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/gcp.mk gcp-inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/gcp/sops &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-gcp-sops.png"
alt="Sops"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>sops-1&lt;/code>&lt;/td>
&lt;td>Ensure service account and IAM binding exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>sops-2&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="observability">Observability&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/gcp.mk gcp-inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/gcp/observability &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-gcp-observability.png"
alt="Observability"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>grafana-1&lt;/code>&lt;/td>
&lt;td>Ensure service account and IAM binding exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>prometheus-1&lt;/code>&lt;/td>
&lt;td>Ensure service account and IAM binding exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>thanos-1&lt;/code>&lt;/td>
&lt;td>Ensure service account and IAM binding exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>thanos-2&lt;/code>&lt;/td>
&lt;td>Ensure that bucket exists and labels correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>thanos-3&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>loki-1&lt;/code>&lt;/td>
&lt;td>Ensure service account and IAM binding exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>loki-2&lt;/code>&lt;/td>
&lt;td>Ensure that bucket exists and labels correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>loki-3&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>tempo-1&lt;/code>&lt;/td>
&lt;td>Ensure service account and IAM binding exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>tempo-2&lt;/code>&lt;/td>
&lt;td>Ensure that bucket exists and labels correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>tempo-3&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="velero">Velero&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/gcp.mk gcp-inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/gcp/velero &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-gcp-velero.png"
alt="Velero"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>velero-1&lt;/code>&lt;/td>
&lt;td>Ensure service account and IAM binding exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>velero-2&lt;/code>&lt;/td>
&lt;td>Ensure that bucket exists and labels correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>velero-3&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="vector">Vector&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/gcp.mk gcp-inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/gcp/vector &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-gcp-vector.png"
alt="Vector"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>vector-1&lt;/code>&lt;/td>
&lt;td>Ensure service account and IAM binding exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>vector-2&lt;/code>&lt;/td>
&lt;td>Ensure that bucket exists and labels correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>vector-3&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="external-dns">External-DNS&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/build/gcp.mk gcp-inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/gcp/external-dns &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-gcp-external-dns.png"
alt="External-DNS"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>external_dns-1&lt;/code>&lt;/td>
&lt;td>Ensure service account and IAM binding exists&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Docs: Inspec Portefaix</title><link>/docs/ibmcloud/deploy/inspec-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/ibmcloud/deploy/inspec-portefaix/</guid><description>
&lt;div class="alert alert-warning" role="alert">
&lt;h4 class="alert-heading">Not Available&lt;/h4>
&lt;/div></description></item><item><title>Docs: Inspec Portefaix</title><link>/docs/oci/deploy/inspec-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/oci/deploy/inspec-portefaix/</guid><description>
&lt;div class="alert alert-warning" role="alert">
&lt;h4 class="alert-heading">Not Available&lt;/h4>
&lt;/div></description></item><item><title>Docs: Inspec Portefaix</title><link>/docs/scaleway/deploy/inspec-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/scaleway/deploy/inspec-portefaix/</guid><description>
&lt;div class="alert alert-warning" role="alert">
&lt;h4 class="alert-heading">Not Available&lt;/h4>
&lt;/div></description></item><item><title>Docs: Hub</title><link>/docs/development/hub/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/development/hub/</guid><description>
&lt;h2 id="portefaix-hub">Portefaix Hub&lt;/h2>
&lt;p>&lt;a href="https://charts.portefaix.xyz/">Portefaix Hub&lt;/a> is the Helm charts repository of the Portefaix project.&lt;/p>
&lt;p>All charts could be find on &lt;a href="https://artifacthub.io/packages/search?repo=portefaix-hub">Artifact Hub&lt;/a>&lt;/p></description></item><item><title>Docs: Uninstall Portefaix</title><link>/docs/alicloud/deploy/uninstall-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/alicloud/deploy/uninstall-portefaix/</guid><description>
&lt;h2 id="terraform">Terraform&lt;/h2>
&lt;p>&lt;a href="https://github.com/features/actions">Github Actions&lt;/a> with &lt;a href="https://www.terraform.io/cloud">Terraform Cloud&lt;/a> could be used to delete the infrastructure:&lt;/p>
&lt;img src="/docs/images/portefaix-alicloud-undeploy.png" alt="Portefaix Azure deletion" class="mt-3 mb-3 rounded"></description></item><item><title>Docs: Uninstall Portefaix</title><link>/docs/aws/deploy/uninstall-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/aws/deploy/uninstall-portefaix/</guid><description>
&lt;h2 id="terraform">Terraform&lt;/h2>
&lt;p>&lt;a href="https://github.com/features/actions">Github Actions&lt;/a> with &lt;a href="https://www.terraform.io/cloud">Terraform Cloud&lt;/a> could be used to delete the infrastructure:&lt;/p>
&lt;img src="/docs/images/portefaix-aws-undeploy.png" alt="Portefaix Azure deletion" class="mt-3 mb-3 rounded"></description></item><item><title>Docs: Uninstall Portefaix</title><link>/docs/azure/deploy/uninstall-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/azure/deploy/uninstall-portefaix/</guid><description>
&lt;h2 id="terraform">Terraform&lt;/h2>
&lt;p>&lt;a href="https://github.com/features/actions">Github Actions&lt;/a> with &lt;a href="https://www.terraform.io/cloud">Terraform Cloud&lt;/a> could be used to delete the infrastructure:&lt;/p>
&lt;img src="/docs/images/portefaix-azure-undeploy.png" alt="Portefaix Azure deletion" class="mt-3 mb-3 rounded"></description></item><item><title>Docs: Uninstall Portefaix</title><link>/docs/civo/deploy/uninstall-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/civo/deploy/uninstall-portefaix/</guid><description/></item><item><title>Docs: Uninstall Portefaix</title><link>/docs/digitalocean/deploy/uninstall-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/digitalocean/deploy/uninstall-portefaix/</guid><description/></item><item><title>Docs: Uninstall Portefaix</title><link>/docs/exoscale/deploy/uninstall-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/exoscale/deploy/uninstall-portefaix/</guid><description/></item><item><title>Docs: Uninstall Portefaix</title><link>/docs/ibmcloud/deploy/uninstall-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/ibmcloud/deploy/uninstall-portefaix/</guid><description/></item><item><title>Docs: Uninstall Portefaix</title><link>/docs/oci/deploy/uninstall-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/oci/deploy/uninstall-portefaix/</guid><description/></item><item><title>Docs: Uninstall Portefaix</title><link>/docs/scaleway/deploy/uninstall-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/scaleway/deploy/uninstall-portefaix/</guid><description/></item><item><title>Docs: Policies</title><link>/docs/development/policies/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/development/policies/</guid><description>
&lt;p>&lt;a href="https://github.com/portefaix/portefaix-policies">Portefaix Policies&lt;/a> contains Kubernetes policies for &lt;a href="https://kyverno.io/">Kyverno&lt;/a> or &lt;a href="https://www.openpolicyagent.org/">Open Policy Agent&lt;/a>.&lt;/p>
&lt;h2 id="kyverno">Kyverno&lt;/h2>
&lt;!-- BEGIN_PORTEFAIX_KYVERNO_DOC -->
&lt;ul>
&lt;li>&lt;code>PORTEFAIX-C0001&lt;/code> - Container must not use latest image tag&lt;/li>
&lt;li>&lt;code>PORTEFAIX-C0002&lt;/code> - Container must set liveness probe&lt;/li>
&lt;li>&lt;code>PORTEFAIX-C0003&lt;/code> - Container must set readiness probe&lt;/li>
&lt;li>&lt;code>PORTEFAIX-C0004&lt;/code> - Container must mount secrets as volumes, not enviroment variables&lt;/li>
&lt;li>&lt;code>PORTEFAIX-C0005&lt;/code> - Container must drop all capabilities&lt;/li>
&lt;li>&lt;code>PORTEFAIX-C0006&lt;/code> - Container must not allow for privilege escalation&lt;/li>
&lt;li>&lt;code>PORTEFAIX-C0008&lt;/code> - Container resource constraints must be specified&lt;/li>
&lt;li>&lt;code>PORTEFAIX-M0001&lt;/code> - Metadata must set recommanded Kubernetes labels&lt;/li>
&lt;li>&lt;code>PORTEFAIX-M0002&lt;/code> - Metadata should have a8r.io annotations&lt;/li>
&lt;li>&lt;code>PORTEFAIX-M0003&lt;/code> - Metadata should have portefaix.xyz annotations&lt;/li>
&lt;li>&lt;code>PORTEFAIX-P0002&lt;/code> - Pod must run without access to the host IPC&lt;/li>
&lt;li>&lt;code>PORTEFAIX-P0003&lt;/code> - Pod must run without access to the host networking&lt;/li>
&lt;li>&lt;code>PORTEFAIX-P0004&lt;/code> - Pod must run as non-root&lt;/li>
&lt;li>&lt;code>PORTEFAIX-P0005&lt;/code> - Pod must run without access to the host PID&lt;/li>
&lt;/ul>
&lt;!-- END_PORTEFAIX_KYVERNO_DOC -->
&lt;h2 id="open-policy-agent">Open Policy Agent&lt;/h2>
&lt;!-- BEGIN_PORTEFAIX_OPA_DOC -->
&lt;ul>
&lt;li>&lt;code>PORTEFAIX-C0001&lt;/code>: Container must not use latest image tag&lt;/li>
&lt;li>&lt;code>PORTEFAIX-C0002&lt;/code>: Container must set liveness probe&lt;/li>
&lt;li>&lt;code>PORTEFAIX-C0003&lt;/code>: Container must set readiness probe&lt;/li>
&lt;li>&lt;code>PORTEFAIX-C0004&lt;/code>: Container must mount secrets as volumes, not enviroment variables&lt;/li>
&lt;li>&lt;code>PORTEFAIX-C0006&lt;/code>: Container must not allow for privilege escalation&lt;/li>
&lt;li>&lt;code>PORTEFAIX-C0008&lt;/code>: Container must define resource contraintes&lt;/li>
&lt;li>&lt;code>PORTEFAIX-M0001&lt;/code>: Metadata should contain all recommanded Kubernetes labels&lt;/li>
&lt;li>&lt;code>PORTEFAIX-M0002&lt;/code>: Metadata should have a8r.io annotations&lt;/li>
&lt;li>&lt;code>PORTEFAIX-M0003&lt;/code>: Metadata should have portefaix.xyz annotations&lt;/li>
&lt;li>&lt;code>PORTEFAIX-N0001&lt;/code>: Disallow Default Namespace&lt;/li>
&lt;/ul>
&lt;!-- END_PORTEFAIX_OPA_DOC --></description></item><item><title>Docs: Uninstall Portefaix</title><link>/docs/gcp/deploy/uninstall-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/gcp/deploy/uninstall-portefaix/</guid><description>
&lt;h2 id="terraform">Terraform&lt;/h2>
&lt;p>&lt;a href="https://github.com/features/actions">Github Actions&lt;/a> with &lt;a href="https://www.terraform.io/cloud">Terraform Cloud&lt;/a> could be used to delete the infrastructure:&lt;/p>
&lt;img src="/docs/images/portefaix-gcp-undeploy.png" alt="Portefaix GCP deletion" class="mt-3 mb-3 rounded"></description></item></channel></rss>