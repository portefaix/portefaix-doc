<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Portefaix – Documentation</title><link>/docs/</link><description>Recent content in Documentation on Portefaix</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><atom:link href="/docs/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: Portefaix</title><link>/docs/about/portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/about/portefaix/</guid><description>
&lt;p>The Portefaix project is dedicated to create an infrastructure on Cloud Providers
and deploy Cloud Native applications into a Kubernetes cluster.&lt;/p>
&lt;h2 id="getting-started-with-portefaix">Getting started with Portefaix&lt;/h2>
&lt;p>Read the &lt;a href="/docs/started/overview/">Portefaix overview&lt;/a> for an
introduction to the Portefaix architecture.&lt;/p>
&lt;p>Follow the &lt;a href="/docs/started/getting-started/">getting-started guide&lt;/a> to set up
your environment and install Portefaix.&lt;/p>
&lt;h2 id="roadmaps">Roadmaps&lt;/h2>
&lt;p>To see what&amp;rsquo;s coming up in future versions of Portefaix, refer to the &lt;a href="/docs/other-guides/roadmap/">Portefaix roadmap&lt;/a>.&lt;/p>
&lt;h2 id="getting-involved">Getting involved&lt;/h2>
&lt;p>There are many ways to contribute to Portefaix, and we welcome contributions!
Read the &lt;a href="/docs/about/contributing">contributor&amp;rsquo;s guide&lt;/a> to get started on the
code, and get to know the community in the
&lt;a href="/docs/about/community">community guide&lt;/a>.&lt;/p></description></item><item><title>Docs: Contributing to Portefaix</title><link>/docs/about/contributing/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/about/contributing/</guid><description>
&lt;div class="alert alert-warning" role="alert">
&lt;h4 class="alert-heading">Work In Progress&lt;/h4>
&lt;/div>
&lt;h2 id="getting-started-as-a-portefaix-contributor">Getting started as a Portefaix contributor&lt;/h2>
&lt;p>This document is the single source of truth for how to contribute to the code base.
Patches and contributions to this project are welcome. There are
just a few small guidelines you need to fo&lt;/p></description></item><item><title>Docs: Community</title><link>/docs/about/community/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/about/community/</guid><description>
&lt;div class="alert alert-warning" role="alert">
&lt;h4 class="alert-heading">Work In Progress&lt;/h4>
&lt;/div></description></item><item><title>Docs: Docs</title><link>/docs/about/docs/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/about/docs/</guid><description>
&lt;p>Welcome to the Portefaix documentation!&lt;/p>
&lt;h2 id="introduction">Introduction&lt;/h2>
&lt;p>The Portefaix docs are published at &lt;a href="https://portefaix.xyz/docs">portefaix.xyz/docs&lt;/a>.&lt;/p>
&lt;p>The source for the docs is in the
&lt;a href="https://github.com/portefaix/portefaix-doc">portefaix/portefaix-doc repo&lt;/a> on GitHub.
We use &lt;a href="https://gohugo.io/">Hugo&lt;/a> to format and generate our website.&lt;/p>
&lt;h2 id="versioning">Versioning&lt;/h2>
&lt;p>&lt;a href="https://portefaix.xyz/docs">portefaix.xyz/docs&lt;/a> points to the &lt;strong>master&lt;/strong> branch of the docs. You can access
other versions by clicking the version dropdown at top right of the website
menu bar.&lt;/p></description></item><item><title>Docs: Authentication and Authorization</title><link>/docs/aws/authentication/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/aws/authentication/</guid><description>
&lt;p>This section shows the how to setup Portefaix with authentication and authorization support in Amazon Webservices (AWS)&lt;/p>
&lt;h2 id="configure-aws">Configure AWS&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ . ./portefaix.sh aws
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span> Portefaix &lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
Setup credentials
Done
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="configure-kubectl">Configure kubectl&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make kubernetes-credentials &lt;span style="color:#000">CLOUD&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>aws &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ kubectl get nodes
NAME STATUS ROLES AGE VERSION
ip-10-0-31-216.eu-west-3.compute.internal Ready &amp;lt;none&amp;gt; 101m v1.18.9-eks-d1db3c
ip-10-0-40-203.eu-west-3.compute.internal Ready &amp;lt;none&amp;gt; 101m v1.18.9-eks-d1db3c
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: Authentication and Authorization</title><link>/docs/exoscale/authentication/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/exoscale/authentication/</guid><description>
&lt;p>This section shows the how to setup Portefaix with authentication and authorization support in Exoscale&lt;/p>
&lt;h2 id="configure-exoscale">Configure Exoscale&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ . ./portefaix.sh exoscale
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span> Portefaix &lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
Setup credentials
Done
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="configure-kubectl">Configure kubectl&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make kubernetes-credentials &lt;span style="color:#000">CLOUD&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>exoscale &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ kubectl get nodes
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: Cert-Manager</title><link>/docs/components/certificates/cert-manager/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/components/certificates/cert-manager/</guid><description>
&lt;h2 id="cert-manager">Cert-Manager&lt;/h2>
&lt;p>Automatically provision and manage TLS certificates in Kubernetes&lt;/p>
&lt;ul>
&lt;li>Chart : &lt;a href="https://artifacthub.io/packages/helm/jetstack/cert-manager">cert-manager&lt;/a>&lt;/li>
&lt;li>Version: &lt;code>1.0.4&lt;/code>&lt;/li>
&lt;/ul>
&lt;h2 id="components">Components&lt;/h2>
&lt;p>&lt;img src="/docs/images/cert-manager-crds.png"
alt="Cert-Manager CRD"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;p>&lt;img src="/docs/images/cert-manager.png"
alt="Cert-Manager"
class="mt-3 mb-3 border border-info rounded">&lt;/p></description></item><item><title>Docs: External DNS</title><link>/docs/components/dns/external-dns/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/components/dns/external-dns/</guid><description>
&lt;h2 id="external-dns">External DNS&lt;/h2>
&lt;ul>
&lt;li>Chart : &lt;a href="https://artifacthub.io/packages/helm/pxxxx/xxxxx">xxxxxx&lt;/a>&lt;/li>
&lt;li>Version: &lt;code>11.0.4&lt;/code>&lt;/li>
&lt;/ul>
&lt;h2 id="components">Components&lt;/h2>
&lt;p>&lt;img src="/docs/images/external-dns.png"
alt="External DNS"
class="mt-3 mb-3 border border-info rounded">&lt;/p></description></item><item><title>Docs: Helm and Kustomize</title><link>/docs/other-guides/helm_kustomize/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/other-guides/helm_kustomize/</guid><description>
&lt;h2 id="helmrelease">HelmRelease&lt;/h2>
&lt;p>&lt;em>HelmRelease&lt;/em> control the Helm chart into Flux.&lt;/p>
&lt;p>You can extract from a HelmRelease file the Helm repository and add it:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ &lt;span style="color:#000">DEBUG&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#204a87">true&lt;/span> make helm-flux-repo &lt;span style="color:#000">CHART&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>kubernetes/base/logging/vector/vector.yaml
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Then display available values from the Helm chart:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ &lt;span style="color:#000">DEBUG&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#204a87">true&lt;/span> make helm-flux-values &lt;span style="color:#000">CHART&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>kubernetes/base/logging/vector/vector.yaml
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="environments">Environments&lt;/h2>
&lt;p>You could rendering Kubernetes manifests files like Flux:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ &lt;span style="color:#000">DEBUG&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#204a87">true&lt;/span> make helm-flux-template &lt;span style="color:#000">CHART&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>kubernetes/base/logging/vector/vector.yaml &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Or install the chart for an environment&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ &lt;span style="color:#000">DEBUG&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#204a87">true&lt;/span> make helm-flux-install &lt;span style="color:#000">CHART&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>kubernetes/base/logging/vector/vector.yaml &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: Hub</title><link>/docs/development/hub/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/development/hub/</guid><description>
&lt;h2 id="portefaix-hub">Portefaix Hub&lt;/h2>
&lt;p>&lt;a href="https://charts.portefaix.xyz/">Portefaix Hub&lt;/a> is the Helm charts repository of the Portefaix project.&lt;/p>
&lt;p>All charts could be find on &lt;a href="https://artifacthub.io/packages/search?repo=portefaix-hub">Artifact Hub&lt;/a>&lt;/p></description></item><item><title>Docs: Install Portefaix</title><link>/docs/aws/deploy/install-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/aws/deploy/install-portefaix/</guid><description>
&lt;p>&lt;a id="aws">&lt;/a>&lt;/p>
&lt;h2 id="setup">Setup&lt;/h2>
&lt;p>Create an &lt;a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/getting-started_create-admin-group.html">admin user&lt;/a>.
Then &lt;a href="https://console.aws.amazon.com/iam/home?#/security_credentials">API Keys&lt;/a>,
and configure Portefaix environment file &lt;code>${HOME}/.config/portefaix/portefaix.sh&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">&lt;span style="color:#8f5902;font-style:italic"># AWS&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">AWS_ACCESS_KEY_ID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;.....&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">AWS_SECRET_ACCESS_KEY&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;.....&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">AWS_DEFAULT_REGION&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;...&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">AWS_REGION&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;....&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And load environment :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ . ./portefaix.sh aws
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="storage-for-terraform">Storage for Terraform&lt;/h2>
&lt;p>Create a S3 bucket for Terraform states:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/aws.mk aws-s3-bucket &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create a DynamoDB table :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/aws.mk aws-dynamodb-create-table &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="terraform">Terraform&lt;/h2>
&lt;h3 id="vpc--internet-gateway">VPC / Internet Gateway&lt;/h3>
&lt;p>Create an Elastic IP for Internet Gateway:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/elastic_ips/internet-gateway &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create the VPC and Internet Gateway :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/vpc &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="eks">EKS&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/eks &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="kubernetes-components">Kubernetes components&lt;/h3>
&lt;h4 id="sops">Sops&lt;/h4>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/sops &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
Outputs:
&lt;span style="color:#000">kms_arn&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> arn:aws:kms:eu-west-3:447241706233:key/cf77f24a-00db-4d6a-8b4b-a8dec3976ff2
&lt;span style="color:#000">role_arn_eks&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> arn:aws:iam::447241706233:role/portefaix-staging-eks-sops-eks
&lt;span style="color:#000">role_arn_users&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> arn:aws:iam::447241706233:role/portefaix-staging-eks-sops-users
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="observability">Observability&lt;/h4>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/observability &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
Outputs:
&lt;span style="color:#000">loki_role_arn&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> arn:aws:iam::xxxxxxxxxxxxx:role/portefaix-staging-eks-loki
&lt;span style="color:#000">prometheus_role_arn&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> arn:aws:iam::xxxxxxxxxxxxx:role/portefaix-staging-eks-loki
&lt;span style="color:#000">tempo_role_arn&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> arn:aws:iam::xxxxxxxxxxxxx:role/portefaix-staging-eks-tempo
&lt;span style="color:#000">thanos_role_arn&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> arn:aws:iam::xxxxxxxxxxxxx:role/portefaix-staging-eks-thanos
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="external-dns">External DNS&lt;/h4>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/external-dns &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
Outputs:
&lt;span style="color:#000">role_arn&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> arn:aws:iam::xxxxxxxxxxx:role/portefaix-staging-eks-external-dns
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="velero">Velero&lt;/h4>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/velero &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
Outputs:
&lt;span style="color:#000">role_arn&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> arn:aws:iam::xxxxxxxxxxxxxxxxx:role/portefaix-staging-eks-velero
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="vector">Vector&lt;/h4>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/vector &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
Outputs:
&lt;span style="color:#000">role_arn&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> arn:aws:iam::xxxxxxxxxxxxxxxxx:role/portefaix-staging-eks-vector
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="cert-manager">Cert-Manager&lt;/h4>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/cert-manager &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
Outputs:
&lt;span style="color:#000">role_arn&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> arn:aws:iam::xxxxxxxxxxxxxxxxx:role/portefaix-staging-eks-cert-manager
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: Install Portefaix</title><link>/docs/azure/deploy/install-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/azure/deploy/install-portefaix/</guid><description>
&lt;p>&lt;a id="azure">&lt;/a>&lt;/p>
&lt;h2 id="setup">Setup&lt;/h2>
&lt;p>Export Azure credentials:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ &lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">AZURE_SUBSCRIPTION_ID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;xxxxxx&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="storage-for-terraform">Storage for Terraform&lt;/h2>
&lt;p>Create a &lt;a href="https://portal.azure.com/#create/Microsoft.StorageAccount">Storage Account&lt;/a> :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/azure.mk azure-storage-account &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
XXXXXXXXXXX
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You could see the Key on the output.&lt;/p>
&lt;p>Create storage container for Terraform states:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/azure.mk azure-storage-container &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev &lt;span style="color:#000">KEY&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;xxxxxxxxxxxxxxxxx&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create the Service Principal for Terraform:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/azure.mk azure-sp &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;span style="color:#ce5c00;font-weight:bold">{&lt;/span>
&lt;span style="color:#4e9a06">&amp;#34;appId&amp;#34;&lt;/span>: &lt;span style="color:#4e9a06">&amp;#34;xxxxxxxxxxxxxxxxx&amp;#34;&lt;/span>,
&lt;span style="color:#4e9a06">&amp;#34;displayName&amp;#34;&lt;/span>: &lt;span style="color:#4e9a06">&amp;#34;portefaix-dev&amp;#34;&lt;/span>,
&lt;span style="color:#4e9a06">&amp;#34;name&amp;#34;&lt;/span>: &lt;span style="color:#4e9a06">&amp;#34;http://portefaix-dev&amp;#34;&lt;/span>,
&lt;span style="color:#4e9a06">&amp;#34;password&amp;#34;&lt;/span>: &lt;span style="color:#4e9a06">&amp;#34;xxxxxxxxxxxx&amp;#34;&lt;/span>,
&lt;span style="color:#4e9a06">&amp;#34;tenant&amp;#34;&lt;/span>: &lt;span style="color:#4e9a06">&amp;#34;xxxxxxxxxxxx&amp;#34;&lt;/span>
&lt;span style="color:#ce5c00;font-weight:bold">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Extract informations and configure portefaix configuration file (&lt;code>hack/config/portefaix.sh&lt;/code>):&lt;/p>
&lt;ul>
&lt;li>&lt;code>SUBSCRIPTION_ID&lt;/code>&lt;/li>
&lt;li>&lt;code>CLIENT_ID&lt;/code>&lt;/li>
&lt;li>&lt;code>CLIENT_SECRET&lt;/code>&lt;/li>
&lt;li>&lt;code>ARM_TENANT_ID&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>And load environment :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ . ./portefaix.sh azure
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Set permissions:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/azure.mk azure-permissions &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="terraform">Terraform&lt;/h2>
&lt;h3 id="virtual-network">Virtual Network&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/azure/vnet &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="nat-gateway">NAT Gateway&lt;/h3>
&lt;p>Public IP addresses :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/azure/public-ips/nat-gateway &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;p>NAT Gateway service:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/azure/nat-gateway &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="aks">AKS&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/azure/aks &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="kubernetes-components">Kubernetes components&lt;/h3>
&lt;h4 id="sops">Sops&lt;/h4>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/azure/sops &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="observability">Observability&lt;/h4>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/azure/observability &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="velero">Velero&lt;/h4>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/azure/velero &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: Install Portefaix</title><link>/docs/exoscale/deploy/install-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/exoscale/deploy/install-portefaix/</guid><description>
&lt;p>&lt;a id="exo">&lt;/a>&lt;/p>
&lt;h2 id="setup">Setup&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">&lt;span style="color:#8f5902;font-style:italic"># AWS&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">EXOSCALE_API_KEY&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;xxxxx&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">EXOSCALE_API_SECRET&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;xxxxxxxxxxx&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">AWS_ACCESS_KEY_ID&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">EXOSCALE_API_KEY&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">AWS_SECRET_ACCESS_KEY&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">EXOSCALE_API_SECRET&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And load environment :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ . ./portefaix.sh exoscale
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="storage-for-terraform">Storage for Terraform&lt;/h2>
&lt;p>Create a S3 bucket for Terraform states:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/exoscale.mk exo-bucket &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="terraform">Terraform&lt;/h2>
&lt;h3 id="sks">SKS&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/exoscale/sks &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: Install Portefaix</title><link>/docs/gcp/deploy/install-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/gcp/deploy/install-portefaix/</guid><description>
&lt;p>&lt;a id="gcloud"/>&lt;/a>&lt;/p>
&lt;h2 id="setup">Setup&lt;/h2>
&lt;p>Authenticate on the Google Cloud Platform:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ gcloud auth application-default login
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Enable APIs:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/gcp.mk gcp-enable-apis &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create a bucket for the Terraform tfstates:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/gcp.mk gcp-bucket &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Configure Portefaix environment file &lt;code>${HOME}/.config/portefaix/portefaix.sh&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">&lt;span style="color:#8f5902;font-style:italic"># GCP&lt;/span>
&lt;span style="color:#204a87">export&lt;/span> &lt;span style="color:#000">TF_VAR_master_authorized_networks&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;[{&amp;#34;cidr_block&amp;#34;: &amp;#34;x.x.x.x/32&amp;#34;, &amp;#34;display_name&amp;#34;: &amp;#34;Home&amp;#34;}]&amp;#39;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And load environment :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ . ./portefaix.sh gcp
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;a id="terraform">&lt;/a>&lt;/p>
&lt;h2 id="terraform">Terraform&lt;/h2>
&lt;h3 id="vpc">VPC&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/gcp/vpc &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="cloud-dns">Cloud DNS&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/gcp/dns &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="cloud-nat">Cloud NAT&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/gcp/external-ips/cloud-nat &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/gcp/cloud-nat &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="gke">GKE&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/gcp/gke &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="kubernetes-components">Kubernetes components&lt;/h3>
&lt;h4 id="sops">Sops&lt;/h4>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/gcp/sops &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
Outputs:
&lt;span style="color:#000">email&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> xxxxxxxxxxxx-sops@xxxxxxxxxxxx.iam.gserviceaccount.com
&lt;span style="color:#000">key&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> projects/xxxxxxxxxxxx/locations/europe-west1/keyRings/xxxxxxxxxxxx-sops/cryptoKeys/xxxxxxxxxxxx-sops
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="observability">Observability&lt;/h4>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/gcp/observability &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
Outputs:
&lt;span style="color:#000">loki_service_account&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> xxxxxxxxxx-loki@xxxxxxxxxx.iam.gserviceaccount.com
&lt;span style="color:#000">prometheus_service_account&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> xxxxxxxxxx-loki@xxxxxxxxxx.iam.gserviceaccount.com
&lt;span style="color:#000">tempo_service_account&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> xxxxxxxxxx-tempo@xxxxxxxxxx.iam.gserviceaccount.com
&lt;span style="color:#000">thanos_service_account&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> xxxxxxxxxx-thanos@xxxxxxxxxx.iam.gserviceaccount.com
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="cert-manager">Cert Manager&lt;/h4>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/gcp/cert-manager &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
Outputs:
&lt;span style="color:#000">cert_manager_service_account&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> xxxxxxxxxxx-cert-manager@xxxxxxxxxxx.iam.gserviceaccount.com
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="external-dns">External DNS&lt;/h4>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/gcp/external-dns &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
Outputs:
&lt;span style="color:#000">external_dns_service_account&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> xxxxxxxxxxx-external-dns@xxxxxxxxxxx.iam.gserviceaccount.com
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="velero">Velero&lt;/h4>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/gcp/velero &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
Outputs:
&lt;span style="color:#000">velero_service_account&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> xxxxxxxxxxx-velero@xxxxxxxxxxx.iam.gserviceaccount.com
&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="vector">Vector&lt;/h4>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-apply &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/gcp/vector &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
Outputs:
&lt;span style="color:#000">vector_service_account&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> xxxxxxxxxxx-vector@xxxxxxxxxxx.iam.gserviceaccount.com
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: Install Portefaix</title><link>/docs/homelab/deploy/install-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/homelab/deploy/install-portefaix/</guid><description>
&lt;p>&lt;a id="os"/>&lt;/a>&lt;/p>
&lt;h2 id="operating-system">Operating System&lt;/h2>
&lt;p>Setup operating system for Raspberry PI :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ sudo dd &lt;span style="color:#204a87;font-weight:bold">if&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>/dev/zero &lt;span style="color:#000">of&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>/dev/mmcblk0
❯ sudo./hack/scripts/sdcard.sh &amp;lt;hostname&amp;gt; /dev/mmcblk0
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Enable SSH :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/k3s.mk sdcard-mount &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>homelab
❯ sudo touch /mnt/portefaix/root/ssh
❯ make -f hack/k3s.mk sdcard-unmount &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>homelab
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Copy keys to each node:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">ssh-copy-id -i ~/.ssh/id_rsa.pub pi@x.x.x.x
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ansible">Ansible&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/k3s.mk ansible-run &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/k3s/machines &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>homelab
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="k3sup">K3Sup&lt;/h2>
&lt;p>Create the master :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/k3s.mk k3s-create &lt;span style="color:#000">SERVER_IP&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>x.x.x.x &lt;span style="color:#000">USER&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>pi &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>homelab
&lt;/code>&lt;/pre>&lt;/div>&lt;p>For each node, add it to the cluster:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/k3s.mk k3s-join &lt;span style="color:#000">SERVER_IP&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>x.x.x.x &lt;span style="color:#000">USER&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>pi &lt;span style="color:#000">AGENT_IP&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>x.x.x.x &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>homelab
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Check Kubernetes cluster:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/k3s.mk k3s-kube-credentials &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>homelab
❯ kubectl get node -o wide
NAME STATUS ROLES AGE VERSION INTERNAL-IP EXTERNAL-IP OS-IMAGE KERNEL-VERSION CONTAINER-RUNTIME
portefaix-3 Ready &amp;lt;none&amp;gt; 3m44s v1.19.1+k3s1 192.168.1.30 &amp;lt;none&amp;gt; Debian GNU/Linux &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>buster&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> 5.10.17-v8+ containerd://1.4.0-k3s1
portefaix-1 Ready master 8m35s v1.19.1+k3s1 192.168.1.114 &amp;lt;none&amp;gt; Debian GNU/Linux &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>buster&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> 5.10.17-v8+ containerd://1.4.0-k3s1
portefaix-2 Ready &amp;lt;none&amp;gt; 6m18s v1.19.1+k3s1 192.168.1.123 &amp;lt;none&amp;gt; Debian GNU/Linux &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>buster&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> 5.10.17-v8+ containerd://1.4.0-k3s1
portefaix-4 Ready &amp;lt;none&amp;gt; 47s v1.19.1+k3s1 192.168.1.32 &amp;lt;none&amp;gt; Debian GNU/Linux &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>buster&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> 5.10.17-v8+ containerd://1.4.0-k3s1
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Creates the &lt;code>sops-gpg&lt;/code> secret:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/k3s.mk pgp-secret &lt;span style="color:#000">CLOUD&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>k3s &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>homelab
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: Loki</title><link>/docs/components/logging/loki/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/components/logging/loki/</guid><description>
&lt;h2 id="loki">Loki&lt;/h2>
&lt;ul>
&lt;li>Chart : &lt;a href="https://artifacthub.io/packages/helm/pxxxx/xxxxx">xxxxxx&lt;/a>&lt;/li>
&lt;li>Version: &lt;code>11.0.4&lt;/code>&lt;/li>
&lt;/ul>
&lt;h2 id="components">Components&lt;/h2>
&lt;p>&lt;img src="/docs/images/loki.png"
alt="Loki"
class="mt-3 mb-3 border border-info rounded">&lt;/p></description></item><item><title>Docs: Overview</title><link>/docs/started/overview/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/started/overview/</guid><description>
&lt;p>This document provides information about setting up Portefaix in various
environments.&lt;/p>
&lt;h2 id="before-you-begin">Before you begin&lt;/h2>
&lt;p>It&amp;rsquo;s important that you have some knowledge of the following systems and tools:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://terraform.io">Terraform&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://kubernetes.io/docs/tutorials/kubernetes-basics/">Kubernetes&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://kustomize.io/">Kustomize&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://helm.sh">Helm&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Docs: Prometheus Operator</title><link>/docs/components/monitoring/prometheus-operator/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/components/monitoring/prometheus-operator/</guid><description>
&lt;h2 id="prometheus-operator">Prometheus Operator&lt;/h2>
&lt;ul>
&lt;li>Chart : &lt;a href="https://artifacthub.io/packages/helm/prometheus-community/kube-prometheus-stack">kube-prometheus-stack&lt;/a>&lt;/li>
&lt;li>Version: &lt;code>11.0.4&lt;/code>&lt;/li>
&lt;/ul>
&lt;h2 id="checks">Checks&lt;/h2>
&lt;ul>
&lt;li>CRD:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ kubectl get crd&lt;span style="color:#000;font-weight:bold">|&lt;/span>grep coreos
alertmanagerconfigs.monitoring.coreos.com 2020-11-08T17:11:39Z
alertmanagers.monitoring.coreos.com 2020-11-08T17:11:40Z
podmonitors.monitoring.coreos.com 2020-11-08T17:11:40Z
probes.monitoring.coreos.com 2020-11-08T17:11:40Z
prometheuses.monitoring.coreos.com 2020-11-08T17:11:41Z
prometheusrules.monitoring.coreos.com 2020-11-08T17:11:41Z
servicemonitors.monitoring.coreos.com 2020-11-08T17:11:42Z
thanosrulers.monitoring.coreos.com 2020-11-08T17:11:42Z
&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Deployment of the Prometheus Operator&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ kubectl get deployments.apps -n monitoring -l &lt;span style="color:#000">app&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>kube-prometheus-stack-operator
NAME READY UP-TO-DATE AVAILABLE AGE
kube-prometheus-stack-operator 1/1 &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> 26m
❯ kubectl get svc -n monitoring -l &lt;span style="color:#000">app&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>kube-prometheus-stack-operator
NAME TYPE CLUSTER-IP EXTERNAL-IP PORT&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>S&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> AGE
kube-prometheus-stack-operator ClusterIP 10.40.16.153 &amp;lt;none&amp;gt; 443/TCP 27m
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="components">Components&lt;/h2>
&lt;!--
&lt;img src="/docs/images/prometheus-operator-crds.png"
alt="Cert-Manager CRD"
class="mt-3 mb-3 border border-info rounded"> -->
&lt;p>&lt;img src="/docs/images/prometheus-operator.png"
alt="Prometheus-Operator"
class="mt-3 mb-3 border border-info rounded">&lt;/p></description></item><item><title>Docs: Promtail</title><link>/docs/components/logging/promtail/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/components/logging/promtail/</guid><description>
&lt;h2 id="promtail">Promtail&lt;/h2>
&lt;ul>
&lt;li>Chart : &lt;a href="https://artifacthub.io/packages/helm/pxxxx/xxxxx">xxxxxx&lt;/a>&lt;/li>
&lt;li>Version: &lt;code>11.0.4&lt;/code>&lt;/li>
&lt;/ul>
&lt;h2 id="components">Components&lt;/h2>
&lt;p>&lt;img src="/docs/images/promtail.png"
alt="Promtail"
class="mt-3 mb-3 border border-info rounded">&lt;/p></description></item><item><title>Docs: Continuous Integration</title><link>/docs/other-guides/cicd/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/other-guides/cicd/</guid><description>
&lt;h2 id="github-actions">Github Actions&lt;/h2>
&lt;p>&lt;a href="https://github.com/features/actions">Github Actions&lt;/a> is used.&lt;/p>
&lt;div class="table-responsive">
&lt;table class="table table-bordered">
&lt;thead class="thead-light">
&lt;tr>
&lt;th>Cloud Provider&lt;/th>
&lt;th>Create (Terraform)&lt;/th>
&lt;th>Destroy (Terraform)&lt;/th>
&lt;th>Check (Inspec)&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Google Cloud Platform&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Amazon AWS&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Microsoft Azure&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>AlibabaCloud&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Scaleway&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Digital Ocean&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;/div></description></item><item><title>Docs: Flux</title><link>/docs/components/flux/flux/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/components/flux/flux/</guid><description>
&lt;h2 id="flux">Flux&lt;/h2>
&lt;h2 id="components">Components&lt;/h2>
&lt;p>&lt;img src="/docs/images/flux-crds.png"
alt="Flux CRD"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;h3 id="aws">AWS&lt;/h3>
&lt;p>&lt;img src="/docs/images/flux_aws.png"
alt="Flux"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;h3 id="azure">AZURE&lt;/h3>
&lt;p>&lt;img src="/docs/images/flux_azure.png"
alt="Flux"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;h3 id="gcp">GCP&lt;/h3>
&lt;p>&lt;img src="/docs/images/flux_gcp.png"
alt="Flux"
class="mt-3 mb-3 border border-info rounded">&lt;/p></description></item><item><title>Docs: Flux Monitoring</title><link>/docs/components/flux/flux-monitoring/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/components/flux/flux-monitoring/</guid><description>
&lt;h2 id="flux">Flux&lt;/h2>
&lt;h2 id="components">Components&lt;/h2>
&lt;p>&lt;img src="/docs/images/flux-monitoring.png"
alt="Flux Monitoring"
class="mt-3 mb-3 border border-info rounded">&lt;/p></description></item><item><title>Docs: Getting Started</title><link>/docs/started/getting-started/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/started/getting-started/</guid><description>
&lt;h2 id="installation">Installation&lt;/h2>
&lt;p>&lt;a id="installation-guides">&lt;/a>&lt;/p>
&lt;h2 id="installing-portefaix">Installing Portefaix&lt;/h2>
&lt;p>There are various ways to install Portefaix. Choose one of the following options
to suit your environment (public cloud, existing Kubernetes cluster, or
a single-node cluster which you can use on a desktop or server or in the cloud).&lt;/p>
&lt;p>&lt;a id="cloud">&lt;/a>&lt;/p>
&lt;h3 id="installing-portefaix-on-a-public-cloud">Installing Portefaix on a public cloud&lt;/h3>
&lt;p>Choose the Portefaix deployment guide for your chosen cloud:&lt;/p>
&lt;ul>
&lt;li>To use Portefaix on Google Kubernetes Engine (GKE),
follow the &lt;a href="/docs/gcp/deploy/">GKE deployment guide&lt;/a>.&lt;/li>
&lt;li>To use Portefaix on Amazon Elastic Kubernetes Service (EKS),
follow the &lt;a href="/docs/aws/deploy/">EKS deployment guide&lt;/a>.&lt;/li>
&lt;li>To use Portefaix on Microsoft Azure Kubernetes Service (AKS),
follow the &lt;a href="/docs/azure/deploy/">AKS deployment guide&lt;/a>.&lt;/li>
&lt;li>To use Portefaix on AlibabaCloud Container Service for Kubernetes (ACK),
follow the &lt;a href="/docs/alicloud/deploy">ACK deployment guide&lt;/a>.&lt;/li>
&lt;/ul>
&lt;!-- * To use Portefaix on IBM Cloud (IKS),
follow the [IKS deployment guide](/docs/ibm/).
* To use Portefaix on IBM Cloud (IKS),
follow the [IKS deployment guide](/docs/ibm/).
* To use Portefaix on IBM Cloud (IKS),
follow the [IKS deployment guide](/docs/ibm/). -->
&lt;h2 id="deployment-quick-reference">Deployment quick reference&lt;/h2>
&lt;p>Below is a matrix of the platforms where you can deploy Portefaix and the
corresponding tools for each platform.&lt;/p>
&lt;div class="table-responsive">
&lt;table class="table table-bordered">
&lt;thead class="thead-light">
&lt;tr>
&lt;th>Cloud Provider&lt;/th>
&lt;th>Sops&lt;/th>
&lt;th>Tfsec&lt;/th>
&lt;th>Inspec&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Google Cloud Platform&lt;/td>
&lt;td>&lt;a href="https://cloud.google.com/security-key-management"> GCP KMS &lt;/a>&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Amazon AWS&lt;/td>
&lt;td>&lt;a href="https://aws.amazon.com/kms/">AWS KMS&lt;/a>&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Microsoft Azure&lt;/td>
&lt;td>&lt;a href="https://azure.microsoft.com/en-us/services/key-vault/">Azure KeyVault&lt;/a>&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-check">&lt;/i>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>AlibabaCloud&lt;/td>
&lt;td>&lt;a href="https://www.openpgp.org/">OpenPGP&lt;/a>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Scaleway&lt;/td>
&lt;td>&lt;a href="https://www.openpgp.org/">OpenPGP&lt;/a>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Digital Ocean&lt;/td>
&lt;td>&lt;a href="https://www.openpgp.org/">OpenPGP&lt;/a>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>K3S&lt;/td>
&lt;td>&lt;a href="https://www.openpgp.org/">OpenPGP&lt;/a>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Kind&lt;/td>
&lt;td>&lt;a href="https://www.openpgp.org/">OpenPGP&lt;/a>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;td>&lt;i class="fas fa-times">&lt;/i>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;/div>
&lt;h2 id="troubleshooting">Troubleshooting&lt;/h2>
&lt;p>See the &lt;a href="/docs/other-guides/troubleshooting/">Portefaix troubleshooting guide&lt;/a>.&lt;/p></description></item><item><title>Docs: Inspec Portefaix</title><link>/docs/aws/deploy/inspec-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/aws/deploy/inspec-portefaix/</guid><description>
&lt;p>&lt;a href="http://inspec.io/">inspec&lt;/a> is used to check infrastructure.&lt;/p>
&lt;p>Check:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/aws.mk inspec-debug
Test infrastructure
────────────────────────────── Platform Details ──────────────────────────────
Name: aws
Families: cloud, api
Release: train-aws: v0.1.15, aws-sdk-core: v3.94.0
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Execute tests:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/aws.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/&amp;lt;SERVICE&amp;gt; &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You could upload JSON results file to &lt;a href="https://heimdall-lite.mitre.org/">Heimdall Lite&lt;/a> to display ressults&lt;/p>
&lt;h2 id="cis-aws-foundations-benchmark">CIS AWS Foundations Benchmark&lt;/h2>
&lt;p>You could perform tests according to the &lt;a href="https://docs.aws.amazon.com/securityhub/latest/userguide/securityhub-standards-cis.html">CIS AWS Foundations Benchmark&lt;/a>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/aws.mk inspec-aws-cis &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="cis-kubernetes-benchmark">CIS Kubernetes Benchmark&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/aws.mk inspec-aws-kubernetes &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="vpc">VPC&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/aws.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/vpc &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-aws-vpc.png"
alt="VPC"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>vpc-1&lt;/code>&lt;/td>
&lt;td>Ensure that VPC exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>vpc-2&lt;/code>&lt;/td>
&lt;td>Ensure that VPC have an Internet Gateway&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>vpc-3&lt;/code>&lt;/td>
&lt;td>Check AWS Security Groups does not have undesirable rules&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>vpc-4&lt;/code>&lt;/td>
&lt;td>Ensure that VPC Subnets exists&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="eks">EKS&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/aws.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/eks &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-aws-eks.png"
alt="EKS"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>eks-1&lt;/code>&lt;/td>
&lt;td>Ensure the AWS EKS Cluster is running a minimal version&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>eks-2&lt;/code>&lt;/td>
&lt;td>Ensure the AWS EKS Cluster control plane has audit logs enabled&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>eks-3&lt;/code>&lt;/td>
&lt;td>Ensure the AWS EKS Cluster is not public&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>eks-4&lt;/code>&lt;/td>
&lt;td>Ensure the AWS EKS Cluster has application secrets encryption enabled&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>eks-5&lt;/code>&lt;/td>
&lt;td>Ensure AWS EKS Cluster Subnets are specific&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>eks-6&lt;/code>&lt;/td>
&lt;td>Ensure AWS EKS Cluster Nodegroups do not allow remote access from all IPs&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="sops">Sops&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/aws.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/sops &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-aws-sops.png"
alt="Sops"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>sops-1&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>sops-2&lt;/code>&lt;/td>
&lt;td>Ensure IAM roles and policies exists&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="observability">Observability&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/aws.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/observability &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-aws-observability.png"
alt="Observability"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>grafana-1&lt;/code>&lt;/td>
&lt;td>Ensure IAM roles and policies exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>prometheus-1&lt;/code>&lt;/td>
&lt;td>Ensure IAM roles and policies exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>thanos-1&lt;/code>&lt;/td>
&lt;td>Ensure that S3 bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>thanos-2&lt;/code>&lt;/td>
&lt;td>Ensure that S3 log bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>thanos-3&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>thanos-4&lt;/code>&lt;/td>
&lt;td>Ensure IAM roles and policies exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>loki-1&lt;/code>&lt;/td>
&lt;td>Ensure that S3 bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>loki-2&lt;/code>&lt;/td>
&lt;td>Ensure that S3 log bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>loki-3&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>loki-4&lt;/code>&lt;/td>
&lt;td>Ensure IAM roles and policies exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>tempo-1&lt;/code>&lt;/td>
&lt;td>Ensure that S3 bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>tempo-2&lt;/code>&lt;/td>
&lt;td>Ensure that S3 log bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>tempo-3&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>tempo-4&lt;/code>&lt;/td>
&lt;td>Ensure IAM roles and policies exists&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="velero">Velero&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/aws.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/velero &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-aws-velero.png"
alt="Velero"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>velero-1&lt;/code>&lt;/td>
&lt;td>Ensure that S3 bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>velero-2&lt;/code>&lt;/td>
&lt;td>Ensure that S3 log bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>velero-3&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>velero-4&lt;/code>&lt;/td>
&lt;td>Ensure IAM roles and policies exists&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="vector">Vector&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/aws.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/aws/vector &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-aws-vector.png"
alt="Vector"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>vector-1&lt;/code>&lt;/td>
&lt;td>Ensure that S3 bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>vector-2&lt;/code>&lt;/td>
&lt;td>Ensure that S3 log bucket exist and tags correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>vector-3&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>vector-4&lt;/code>&lt;/td>
&lt;td>Ensure IAM roles and policies exists&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Docs: Inspec Portefaix</title><link>/docs/azure/deploy/inspec-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/azure/deploy/inspec-portefaix/</guid><description>
&lt;h2 id="inspec">Inspec&lt;/h2>
&lt;p>&lt;a href="http://inspec.io/">inspec&lt;/a> is used to check infrastructure.&lt;/p>
&lt;p>Check:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/azure.mk inspec-debug
Test infrastructure
────────────────────────────── Platform Details ──────────────────────────────
Name: azure
Families: cloud, api
Release: azure_mgmt_resources-v0.17.8
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Execute tests:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/azure.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/azure/&amp;lt;SERVICE&amp;gt; &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You could upload JSON results file to &lt;a href="https://heimdall-lite.mitre.org/">Heimdall Lite&lt;/a> to display ressults&lt;/p>
&lt;h3 id="microsoft-azure-cis-foundations">Microsoft Azure CIS Foundations&lt;/h3>
&lt;p>You could perform tests accoring the &lt;a href="https://azure.microsoft.com/fr-fr/resources/cis-microsoft-azure-foundations-security-benchmark/">CIS Microsoft Azure Foundations Security Benchmark&lt;/a>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/azure.mk inspec-cis &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="aks">AKS&lt;/h3>
&lt;p>&lt;img src="/docs/images/inspec-azure-aks.png"
alt="AKS"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>resourcegroup-1&lt;/code>&lt;/td>
&lt;td>Check that resource group exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>aks-1&lt;/code>&lt;/td>
&lt;td>Ensure logging to Azure Monitor is configured&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>aks-2&lt;/code>&lt;/td>
&lt;td>Ensure RBAC is enabled&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>aks-3&lt;/code>&lt;/td>
&lt;td>Ensure API Server Authorized IP Ranges are configured&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Docs: Inspec Portefaix</title><link>/docs/exoscale/deploy/inspec-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/exoscale/deploy/inspec-portefaix/</guid><description>
&lt;div class="alert alert-warning" role="alert">
&lt;h4 class="alert-heading">Not Available&lt;/h4>
&lt;/div></description></item><item><title>Docs: Inspec Portefaix</title><link>/docs/gcp/deploy/inspec-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/gcp/deploy/inspec-portefaix/</guid><description>
&lt;p>&lt;a href="http://inspec.io/">inspec&lt;/a> is used to check infrastructure:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/gcp.mk inspec-debug
Test infrastructure
────────────────────────────── Platform Details ──────────────────────────────
Name: gcp
Families: cloud, api
Release: google-api-client-v0.34.1
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Execute tests:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/gcp.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/gcp/&amp;lt;SERVICE&amp;gt; &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You could upload JSON results file to &lt;a href="https://heimdall-lite.mitre.org/">Heimdall Lite&lt;/a> to display ressults&lt;/p>
&lt;h2 id="cis-kubernetes-benchmark">CIS Kubernetes Benchmark&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/gcp.mk inspec-gcp-kubernetes &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="gcp-cis">GCP CIS&lt;/h2>
&lt;p>You could perform tests accoring the &lt;a href="https://opensource.googleblog.com/2020/08/assess-security-of-cloud-deployments.html">GCP CIS&lt;/a>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/gcp.mk inspec-cis &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="vpc">VPC&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/gcp.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/gcp/vpc &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-gcp-vpc.png"
alt="VPC"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>vpc-1&lt;/code>&lt;/td>
&lt;td>Ensure default network is deleted&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>vpc-2&lt;/code>&lt;/td>
&lt;td>Ensure network is correctly configure&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="gke">GKE&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f gcp.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/gcp/gke &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-gcp-gke.png"
alt="GKE"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>gke-1&lt;/code>&lt;/td>
&lt;td>Stackdriver Logging and Monitoring is configured&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>gke-2&lt;/code>&lt;/td>
&lt;td>Basic Authentication is disabled&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>gke-3&lt;/code>&lt;/td>
&lt;td>Ensure GKE Nodes are not public&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>gke-4&lt;/code>&lt;/td>
&lt;td>Ensure the GKE Control Plane is not public&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>gke-5&lt;/code>&lt;/td>
&lt;td>Ensure the Network Policy managed addon is enabled&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>gke-6&lt;/code>&lt;/td>
&lt;td>Ensure OAuth Access Scopes and dedicated Service Accounts for node pools&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>gke-7&lt;/code>&lt;/td>
&lt;td>Ensure GKE Node Pools should use the COS or COS_CONTAINERD Operating System&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>gke-8&lt;/code>&lt;/td>
&lt;td>GKE Workload Identity should be enabled on all node pools&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>gke-9&lt;/code>&lt;/td>
&lt;td>GKE Shielded Nodes should be enabled on all NodePools&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>gke-10&lt;/code>&lt;/td>
&lt;td>Ensure instances have labels&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>gke-11&lt;/code>&lt;/td>
&lt;td>Ensure instances have tags&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="sops">Sops&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/gcp.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/gcp/sops &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-gcp-sops.png"
alt="Sops"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>sops-1&lt;/code>&lt;/td>
&lt;td>Ensure service account and IAM binding exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>sops-2&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="observability">Observability&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/gcp.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/gcp/observability &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-gcp-observability.png"
alt="Observability"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>grafana-1&lt;/code>&lt;/td>
&lt;td>Ensure service account and IAM binding exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>prometheus-1&lt;/code>&lt;/td>
&lt;td>Ensure service account and IAM binding exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>thanos-1&lt;/code>&lt;/td>
&lt;td>Ensure service account and IAM binding exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>thanos-2&lt;/code>&lt;/td>
&lt;td>Ensure that bucket exists and labels correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>thanos-3&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>loki-1&lt;/code>&lt;/td>
&lt;td>Ensure service account and IAM binding exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>loki-2&lt;/code>&lt;/td>
&lt;td>Ensure that bucket exists and labels correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>loki-3&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>tempo-1&lt;/code>&lt;/td>
&lt;td>Ensure service account and IAM binding exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>tempo-2&lt;/code>&lt;/td>
&lt;td>Ensure that bucket exists and labels correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>tempo-3&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="velero">Velero&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/gcp.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/gcp/velero &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-gcp-velero.png"
alt="Velero"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>velero-1&lt;/code>&lt;/td>
&lt;td>Ensure service account and IAM binding exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>velero-2&lt;/code>&lt;/td>
&lt;td>Ensure that bucket exists and labels correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>velero-3&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="vector">Vector&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/gcp.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/gcp/vector &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-gcp-vector.png"
alt="Vector"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>vector-1&lt;/code>&lt;/td>
&lt;td>Ensure service account and IAM binding exists&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>vector-2&lt;/code>&lt;/td>
&lt;td>Ensure that bucket exists and labels correcly set&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>vector-3&lt;/code>&lt;/td>
&lt;td>Ensure that Kms key exist&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="external-dns">External-DNS&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/gcp.mk inspec-test &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/gcp/external-dns &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="/docs/images/inspec-gcp-external-dns.png"
alt="External-DNS"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Code&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>external_dns-1&lt;/code>&lt;/td>
&lt;td>Ensure service account and IAM binding exists&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Docs: Let's Encrypt</title><link>/docs/components/certificates/letsencrypt/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/components/certificates/letsencrypt/</guid><description>
&lt;h2 id="lets-encrypt">Let&amp;rsquo;s Encrypt&lt;/h2>
&lt;p>Create a &lt;a href="https://cert-manager.io/docs/concepts/issuer/">cluster issuer&lt;/a> to use Let&amp;rsquo;s Encrypt.&lt;/p>
&lt;h2 id="components">Components&lt;/h2>
&lt;p>&lt;img src="/docs/images/letsencrypt.png"
alt="Cert-Manager CRD"
class="mt-3 mb-3 border border-info rounded">&lt;/p></description></item><item><title>Docs: Policies</title><link>/docs/development/policies/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/development/policies/</guid><description>
&lt;h2 id="open-policy-agent">Open Policy Agent&lt;/h2>
&lt;h2 id="kyverno">Kyverno&lt;/h2></description></item><item><title>Docs: Prometheus</title><link>/docs/components/monitoring/prometheus/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/components/monitoring/prometheus/</guid><description>
&lt;h2 id="prometheus">Prometheus&lt;/h2>
&lt;ul>
&lt;li>Chart : &lt;a href="https://artifacthub.io/packages/helm/prometheus-community/kube-prometheus-stack">kube-prometheus-stack&lt;/a>&lt;/li>
&lt;li>Version: &lt;code>11.0.4&lt;/code>&lt;/li>
&lt;/ul>
&lt;h2 id="components">Components&lt;/h2>
&lt;h3 id="aws">AWS&lt;/h3>
&lt;p>&lt;img src="/docs/images/prometheus_aws.png"
alt="Node Exporter"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;h3 id="azure">AZURE&lt;/h3>
&lt;p>&lt;img src="/docs/images/prometheus_azure.png"
alt="Node Exporter"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;h3 id="gcp">GCP&lt;/h3>
&lt;p>&lt;img src="/docs/images/prometheus_gcp.png"
alt="Node Exporter"
class="mt-3 mb-3 border border-info rounded">&lt;/p></description></item><item><title>Docs: Secrets</title><link>/docs/setup/secrets/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/setup/secrets/</guid><description>
&lt;h2 id="secrets">Secrets&lt;/h2>
&lt;p>&lt;a href="https://github.com/mozilla/sops">Sops&lt;/a> is used to manage secrets.&lt;/p>
&lt;h3 id="store">Store&lt;/h3>
&lt;p>Put your sensitive data into the directory &lt;code>.secrets&lt;/code> or &lt;code>.secrets/&amp;lt;CLOUD_PROVIDER&amp;gt;&lt;/code>&lt;/p>
&lt;h3 id="kubernetes-secret">Kubernetes secret&lt;/h3>
&lt;p>Create a Kubernetes secret file from sensitive file.&lt;/p>
&lt;p>Ex: for Thanos configuration :&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="color:#000">❯ cat .secrets/aws/object-store.yaml&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">S3&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">config&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">bucket&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">xxxxxxxxxxx&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">endpoint&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">s3.eu-west-3.amazonaws.com&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">region&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">eu-west-3&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make kubernetes-secret &lt;span style="color:#000">NAME&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>thanos-object-storage &lt;span style="color:#000">NAMESPACE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>monitoring &lt;span style="color:#000">FILE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>.secrets/aws/object-store.yaml &amp;gt; thanos-object-storage.yaml
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="encrypt">Encrypt&lt;/h3>
&lt;p>Encrypt the file using Sops:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make sops-encrypt &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>staging &lt;span style="color:#000">CLOUD&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>aws &lt;span style="color:#000">FILE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>thanos-object-storage.yaml
&lt;/code>&lt;/pre>&lt;/div>&lt;p>You can now safely store this file into Git.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ mv thanos-object-storage.yaml kubernetes/overlays/staging/monitoring/thanos/
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="decrypt">Decrypt&lt;/h3>
&lt;p>Check you can decrypt the file:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make sops-decrypt &lt;span style="color:#000">FILE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>kubernetes/overlays/staging/monitoring/thanos/thanos-object-storage.yaml
apiVersion: v1
data:
object-store.yaml: xxxxxxxxxxx
kind: Secret
metadata:
creationTimestamp: null
name: thanos-object-storage
namespace: monitoring
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="cicd">CICD&lt;/h2>
&lt;p>Generate a GPG key with OpenPGP without specifying a passphrase:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ gpg --full-generate-key
Real name: nlamirault
Email address: nlamirault@users.noreply.github.com
Comment:
You selected this USER-ID:
&lt;span style="color:#4e9a06">&amp;#34;nlamirault &amp;lt;nlamirault@users.noreply.github.com&amp;gt;&amp;#34;&lt;/span>
Change &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>N&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>ame, &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>C&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>omment, &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>E&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>mail or &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>O&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>kay/&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>Q&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>uit? O
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Retrieve the GPG key ID:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ gpg --export-secret-keys &lt;span style="color:#4e9a06">\
&lt;/span>&lt;span style="color:#4e9a06">&lt;/span>--armor FC5BB3323309486AC8DA477CEC6421C7C33D2301
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Add this output into a Github Secret &lt;code>SOPS_GPG_KEY&lt;/code>.&lt;/p>
&lt;p>On the &lt;code>e2e&lt;/code> Github Action workflow, we create a Kubernetes secret &lt;code>sops-gpg&lt;/code>
which will be used by Flux.&lt;/p></description></item><item><title>Docs: Vector</title><link>/docs/components/logging/vector/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/components/logging/vector/</guid><description>
&lt;h2 id="vector">Vector&lt;/h2>
&lt;ul>
&lt;li>Chart : &lt;a href="https://artifacthub.io/packages/helm/pxxxx/xxxxx">xxxxxx&lt;/a>&lt;/li>
&lt;li>Version: &lt;code>11.0.4&lt;/code>&lt;/li>
&lt;/ul>
&lt;h2 id="components">Components&lt;/h2>
&lt;p>&lt;img src="/docs/images/Vector.png"
alt="Vector"
class="mt-3 mb-3 border border-info rounded">&lt;/p></description></item><item><title>Docs: Velero</title><link>/docs/components/storage/velero/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/components/storage/velero/</guid><description>
&lt;h2 id="velero">velero&lt;/h2>
&lt;h2 id="components">Components&lt;/h2>
&lt;h3 id="aws">AWS&lt;/h3>
&lt;p>&lt;img src="/docs/images/velero_aws.png"
alt="velero"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;h3 id="azure">AZURE&lt;/h3>
&lt;p>&lt;img src="/docs/images/velero_azure.png"
alt="velero"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;h3 id="gcp">GCP&lt;/h3>
&lt;p>&lt;img src="/docs/images/velero_gcp.png"
alt="velero"
class="mt-3 mb-3 border border-info rounded">&lt;/p></description></item><item><title>Docs: Alertmanager</title><link>/docs/components/monitoring/alertmanager/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/components/monitoring/alertmanager/</guid><description>
&lt;h2 id="alertmanager">Alertmanager&lt;/h2>
&lt;ul>
&lt;li>Chart : &lt;a href="https://artifacthub.io/packages/helm/prometheus-community/kube-prometheus-stack">kube-prometheus-stack&lt;/a>&lt;/li>
&lt;li>Version: &lt;code>11.0.4&lt;/code>&lt;/li>
&lt;/ul>
&lt;h2 id="components">Components&lt;/h2>
&lt;h3 id="aws">AWS&lt;/h3>
&lt;p>&lt;img src="/docs/images/alertmanager_aws.png"
alt="Alertmanager"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;h3 id="azure">AZURE&lt;/h3>
&lt;p>&lt;img src="/docs/images/alertmanager_azure.png"
alt="Alertmanager"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;h3 id="gcp">GCP&lt;/h3>
&lt;p>&lt;img src="/docs/images/alertmanager_gcp.png"
alt="Alertmanager"
class="mt-3 mb-3 border border-info rounded">&lt;/p></description></item><item><title>Docs: Gitops</title><link>/docs/setup/gitops/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/setup/gitops/</guid><description>
&lt;p>&lt;a href="https://www.weave.works/technologies/gitops/">Gitops&lt;/a> model used is &lt;a href="https://toolkit.fluxcd.io/">Flux v2&lt;/a>&lt;/p>
&lt;p>&lt;img src="/docs/images/gitops-toolkit.png"
alt="Flux v2"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;h2 id="organization">Organization&lt;/h2>
&lt;p>Manifests files :&lt;/p>
&lt;ul>
&lt;li>&lt;code>kubernetes/base&lt;/code> directory contains manifests for all components&lt;/li>
&lt;li>&lt;code>kubernetes/overlays/**&lt;/code> directory contains &lt;a href="https://kustomize.io/">Kustomize&lt;/a> overlays&lt;/li>
&lt;/ul>
&lt;p>Flux components are deployed for each clusster on &lt;code>clusters/&amp;lt;CLOUD&amp;gt;/&amp;lt;ENV&amp;gt;/&lt;/code> :&lt;/p>
&lt;ul>
&lt;li>&lt;code>clusters/&amp;lt;CLOUD&amp;gt;/&amp;lt;ENV&amp;gt;/flux-system&lt;/code> : Flux core components&lt;/li>
&lt;li>&lt;code>clusters/&amp;lt;CLOUD&amp;gt;/&amp;lt;ENV&amp;gt;/*.yaml&lt;/code> : &lt;a href="https://toolkit.fluxcd.io/components/kustomize/kustomization/">Flux Kustomization&lt;/a> files for components&lt;/li>
&lt;/ul>
&lt;h2 id="sync">Sync&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make gitops-bootstrap &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;environment&amp;gt; &lt;span style="color:#000">CLOUD&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;cloud provider&amp;gt; &lt;span style="color:#000">BRANCH&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;git branch to use&amp;gt;
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: Inspec</title><link>/docs/development/inspec/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/development/inspec/</guid><description>
&lt;h2 id="gcp">GCP&lt;/h2>
&lt;h2 id="aws">AWS&lt;/h2>
&lt;h2 id="azure">Azure&lt;/h2></description></item><item><title>Docs: Uninstall Portefaix</title><link>/docs/aws/deploy/uninstall-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/aws/deploy/uninstall-portefaix/</guid><description/></item><item><title>Docs: Uninstall Portefaix</title><link>/docs/azure/deploy/uninstall-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/azure/deploy/uninstall-portefaix/</guid><description/></item><item><title>Docs: Uninstall Portefaix</title><link>/docs/exoscale/deploy/uninstall-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/exoscale/deploy/uninstall-portefaix/</guid><description/></item><item><title>Docs: Mixin</title><link>/docs/development/mixin/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/development/mixin/</guid><description>
&lt;p>The &lt;a href="https://github.com/portefaix/portefaix-mixin">portefaix-mixin&lt;/a> is a collection of reusable and configurable
&lt;a href="https://prometheus.io/">Prometheus&lt;/a> alerts, and &lt;a href="https://grafana.com/">Grafana&lt;/a> dashboards.&lt;/p></description></item><item><title>Docs: Node Exporter</title><link>/docs/components/monitoring/node-exporter/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/components/monitoring/node-exporter/</guid><description>
&lt;h2 id="node-exporter">Node Exporter&lt;/h2>
&lt;ul>
&lt;li>Chart : &lt;a href="https://artifacthub.io/packages/helm/prometheus-community/kube-prometheus-stack">kube-prometheus-stack&lt;/a>&lt;/li>
&lt;li>Version: &lt;code>11.0.4&lt;/code>&lt;/li>
&lt;/ul>
&lt;h2 id="components">Components&lt;/h2>
&lt;h3 id="aws">AWS&lt;/h3>
&lt;p>&lt;img src="/docs/images/node_exporter_aws.png"
alt="Node Exporter"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;h3 id="azure">AZURE&lt;/h3>
&lt;p>&lt;img src="/docs/images/node_exporter_azure.png"
alt="Node Exporter"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;h3 id="gcp">GCP&lt;/h3>
&lt;p>&lt;img src="/docs/images/node_exporter_gcp.png"
alt="Node Exporter"
class="mt-3 mb-3 border border-info rounded">&lt;/p></description></item><item><title>Docs: Uninstall Portefaix</title><link>/docs/gcp/deploy/uninstall-portefaix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/gcp/deploy/uninstall-portefaix/</guid><description>
&lt;h2 id="terraform">Terraform&lt;/h2>
&lt;h3 id="gke">GKE&lt;/h3>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make terraform-destroy &lt;span style="color:#000">SERVICE&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>iac/gcp/gke &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: Kube State Metrics</title><link>/docs/components/monitoring/kube-state-metrics/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/components/monitoring/kube-state-metrics/</guid><description>
&lt;h2 id="kube-state-metrics">Kube State Metrics&lt;/h2>
&lt;ul>
&lt;li>Chart : &lt;a href="https://artifacthub.io/packages/helm/prometheus-community/kube-prometheus-stack">kube-prometheus-stack&lt;/a>&lt;/li>
&lt;li>Version: &lt;code>11.0.4&lt;/code>&lt;/li>
&lt;/ul>
&lt;h2 id="components">Components&lt;/h2>
&lt;p>&lt;img src="/docs/images/kube-state-metrics.png"
alt="Kube-State-Metrics"
class="mt-3 mb-3 border border-info rounded">&lt;/p></description></item><item><title>Docs: Roadmap</title><link>/docs/other-guides/roadmap/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/other-guides/roadmap/</guid><description>
&lt;h2 id="v1">v1&lt;/h2>
&lt;h3 id="infrastructure">Infrastructure&lt;/h3>
&lt;ul>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> Development environment&lt;/span>&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> Terraform code for Google Cloud Platform&lt;/span> [ &lt;a href="https://github.com/portefaix/portefaix/issues/1">#1&lt;/a> ]&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> Terraform code for Amazon AWS&lt;/span> [ &lt;a href="https://github.com/portefaix/portefaix/issues/2">#2&lt;/a> ]&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> Terraform code for Microsoft Azure&lt;/span> [ &lt;a href="https://github.com/portefaix/portefaix/issues/3">#3&lt;/a> ]&lt;/li>
&lt;/ul>
&lt;h3 id="core">Core&lt;/h3>
&lt;ul>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> Flux v2 bootstrap&lt;/span>&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> &lt;code>WIP&lt;/code> Sops (&lt;i class="fas fa-check"> GKE &lt;/i>, &lt;i class="fas fa-check"> EKS &lt;/i>, AKS)&lt;/li>
&lt;/ul>
&lt;h3 id="observability">Observability&lt;/h3>
&lt;ul>
&lt;li>&lt;input disabled="" type="checkbox"> &lt;code>WIP&lt;/code> Monitoring: Prometheus, Thanos, Alertmanager (&lt;i class="fas fa-check"> GKE &lt;/i>, &lt;i class="fas fa-check"> EKS &lt;/i>, AKS)&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> &lt;code>WIP&lt;/code> Logging: Loki, FluentBit, Vector (&lt;i class="fas fa-check"> GKE &lt;/i>, EKS, AKS)&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> Tracing: Tempo (GKE, EKS, AKS)&lt;/li>
&lt;/ul>
&lt;h3 id="networking">Networking&lt;/h3>
&lt;ul>
&lt;li>&lt;input disabled="" type="checkbox"> &lt;code>WIP&lt;/code> External-DNS, Cert-Manager (&lt;i class="fas fa-check"> GKE &lt;/i>, &lt;i class="fas fa-check"> EKS &lt;/i>, AKS)&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> &lt;code>WIP&lt;/code> Oauth2-Proxy (GKE, EKS, AKS)&lt;/li>
&lt;/ul>
&lt;h3 id="service-mesh">Service Mesh&lt;/h3>
&lt;ul>
&lt;li>&lt;input disabled="" type="checkbox"> &lt;code>WIP&lt;/code> Open Service Mesh (&lt;i class="fas fa-check"> GKE &lt;/i>, EKS, AKS)&lt;/li>
&lt;/ul>
&lt;h3 id="chaos">Chaos&lt;/h3>
&lt;ul>
&lt;li>&lt;input disabled="" type="checkbox"> &lt;code>WIP&lt;/code> Chaos Mesh (&lt;i class="fas fa-check"> GKE &lt;/i>, EKS, AKS)&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> &lt;code>WIP&lt;/code> Litmus Chaos (&lt;i class="fas fa-check"> GKE &lt;/i>, EKS, AKS)&lt;/li>
&lt;/ul>
&lt;h2 id="v2">v2&lt;/h2>
&lt;h3 id="service-mesh-cloud-providers">Service Mesh Cloud Providers&lt;/h3>
&lt;ul>
&lt;li>&lt;input disabled="" type="checkbox"> &lt;a href="https://cloud.google.com/traffic-director/">Traffic Director&lt;/a> [ &lt;a href="https://github.com/portefaix/portefaix/issues/8">#8&lt;/a> ]&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> &lt;a href="https://aws.amazon.com/fr/app-mesh/">AWS App Mesh&lt;/a> [ &lt;a href="https://github.com/portefaix/portefaix/issues/9">#9&lt;/a> ]&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> &lt;a href="https://docs.microsoft.com/en-us/azure/service-fabric-mesh/">Service Fabric Mesh&lt;/a> [ &lt;a href="https://github.com/portefaix/portefaix/issues/10">#10&lt;/a> ]&lt;/li>
&lt;/ul>
&lt;h2 id="backlog">Backlog&lt;/h2>
&lt;h3 id="cloud-providers">Cloud providers&lt;/h3>
&lt;ul>
&lt;li>&lt;input disabled="" type="checkbox"> &lt;code>WIP&lt;/code> Terraform code for Scaleway&lt;/span> [ &lt;a href="https://github.com/portefaix/portefaix/issues/17">#17&lt;/a> ]&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> &lt;code>WIP&lt;/code> Terraform code for Digital Ocean&lt;/span> [ &lt;a href="https://github.com/portefaix/portefaix/issues/18">#18&lt;/a> ]&lt;/li>
&lt;/ul>
&lt;h3 id="secrets-store-csi-driver">Secrets Store CSI Driver&lt;/h3>
&lt;ul>
&lt;li>&lt;input disabled="" type="checkbox"> &lt;a href="https://github.com/GoogleCloudPlatform/secrets-store-csi-driver-provider-gcp">GCP Secret manager&lt;/a> [ &lt;a href="https://github.com/portefaix/portefaix/issues/4">#4&lt;/a> ]&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> &lt;a href="https://github.com/aws/containers-roadmap/issues/895">Amazon Secrets manager&lt;/a> [ &lt;a href="https://github.com/portefaix/portefaix/issues/5">#5&lt;/a> ]&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> &lt;a href="https://github.com/Azure/secrets-store-csi-driver-provider-azure">Azure Vault&lt;/a> [ &lt;a href="https://github.com/portefaix/portefaix/issues/6">#6&lt;/a> ]&lt;/li>
&lt;/ul>
&lt;h3 id="managing-cloud-services-via-kubernetes-crds">Managing Cloud Services via Kubernetes CRDs&lt;/h3>
&lt;ul>
&lt;li>&lt;input disabled="" type="checkbox"> &lt;a href="https://github.com/aws/aws-controllers-k8s">AWS Controllers for Kubernetes (ACK)&lt;/a>&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> &lt;a href="https://github.com/Azure/azure-service-operator">Azure Service Operator (for Kubernetes)&lt;/a>&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> &lt;a href="https://cloud.google.com/config-connector/docs/overview">Google Config Connector&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Docs: Thanos</title><link>/docs/components/monitoring/thanos/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/components/monitoring/thanos/</guid><description>
&lt;h2 id="thanos">Thanos&lt;/h2>
&lt;ul>
&lt;li>Chart : &lt;a href="https://artifacthub.io/packages/helm/Thanos-community/kube-Thanos-stack">kube-Thanos-stack&lt;/a>&lt;/li>
&lt;li>Version: &lt;code>11.0.4&lt;/code>&lt;/li>
&lt;/ul>
&lt;h2 id="components">Components&lt;/h2>
&lt;h3 id="aws">AWS&lt;/h3>
&lt;p>&lt;img src="/docs/images/thanos_aws.png"
alt="Thanos"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;h3 id="azure">AZURE&lt;/h3>
&lt;p>&lt;img src="/docs/images/thanos_azure.png"
alt="Thanos"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;h3 id="gcp">GCP&lt;/h3>
&lt;p>&lt;img src="/docs/images/thanos_gcp.png"
alt="Thanos"
class="mt-3 mb-3 border border-info rounded">&lt;/p></description></item><item><title>Docs: Grafana</title><link>/docs/components/monitoring/grafana/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/components/monitoring/grafana/</guid><description>
&lt;h2 id="grafana">Grafana&lt;/h2>
&lt;ul>
&lt;li>Chart : &lt;a href="https://artifacthub.io/packages/helm/Grafana-community/kube-Grafana-stack">kube-Grafana-stack&lt;/a>&lt;/li>
&lt;li>Version: &lt;code>11.0.4&lt;/code>&lt;/li>
&lt;/ul>
&lt;h2 id="components">Components&lt;/h2>
&lt;h3 id="aws">AWS&lt;/h3>
&lt;p>&lt;img src="/docs/images/grafana_aws.png"
alt="Grafana"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;h3 id="azure">AZURE&lt;/h3>
&lt;p>&lt;img src="/docs/images/grafana_azure.png"
alt="Grafana"
class="mt-3 mb-3 border border-info rounded">&lt;/p>
&lt;h3 id="gcp">GCP&lt;/h3>
&lt;p>&lt;img src="/docs/images/grafana_gcp.png"
alt="Grafana"
class="mt-3 mb-3 border border-info rounded">&lt;/p></description></item><item><title>Docs: Authentication and Authorization</title><link>/docs/gcp/authentication/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/gcp/authentication/</guid><description>
&lt;p>This section shows the how to setup Portefaix with authentication and authorization support in Google Cloud Platform (GCP).&lt;/p>
&lt;h2 id="configure-gcloud">Configure Gcloud&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ . ./portefaix.sh gcp
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span> Portefaix &lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
Setup credentials
Done
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="configure-kubectl">Configure kubectl&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make kubernetes-credentials &lt;span style="color:#000">CLOUD&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>gcp &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>prod
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ kubectl get nodes
NAME STATUS ROLES AGE VERSION
gke-xxxxxxxxxx-cluster-g-core-5d5d62be-tf15 Ready &amp;lt;none&amp;gt; 7h37m v1.18.10-gke.601
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: Authentication and Authorization</title><link>/docs/homelab/authentication/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/homelab/authentication/</guid><description>
&lt;h2 id="configure-kubectl">Configure kubectl&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make kubernetes-credentials &lt;span style="color:#000">CLOUD&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>k3s &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>homelab
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ kubectl get nodes
NAME STATUS ROLES AGE VERSION
portefaix-1 Ready master 3h2m v1.18.17+k3s1
portefaix-4 Ready &amp;lt;none&amp;gt; 5m36s v1.18.17+k3s1
portefaix-3 Ready &amp;lt;none&amp;gt; 5m36s v1.18.17+k3s1
portefaix-2 Ready &amp;lt;none&amp;gt; 5m35s v1.18.17+k3s1
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: Access Control for Azure Deployment</title><link>/docs/azure/authentication/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/azure/authentication/</guid><description>
&lt;p>This section shows the how to setup Portefaix with authentication and authorization support in Microsoft Azure (AZURE)&lt;/p>
&lt;h2 id="configure-azure">Configure Azure&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ . ./portefaix.sh azure
&lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span> Portefaix &lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
Setup credentials
Done
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="configure-kubectl">Configure kubectl&lt;/h2>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ make -f hack/azure.mk azure-kube-credentials &lt;span style="color:#000">ENV&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>dev
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">❯ kubectl get nodes
NAME STATUS ROLES AGE VERSION
aks-core-19506595-vmss000000 Ready agent 8h v1.18.10
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: Troubleshooting</title><link>/docs/other-guides/troubleshooting/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/docs/other-guides/troubleshooting/</guid><description>
&lt;p>This page presents some hints for troubleshooting specific problems that you
may encounter.&lt;/p>
&lt;h2 id="next-steps">Next steps&lt;/h2>
&lt;p>Visit the &lt;a href="/docs/other-guides/support/">Portefaix support page&lt;/a> to find resources
and community forums where you can ask for help.&lt;/p></description></item></channel></rss>